<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Conditions | Advanced R</title>
  <meta name="description" content="8 Conditions | Advanced R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Conditions | Advanced R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Conditions | Advanced R" />
  
  
  

<meta name="author" content="Hadley Wickham" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="environments.html"/>
<link rel="next" href="fp.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141212623-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-141212623-1');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="adv-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advanced R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-books"><i class="fa fa-check"></i>Other books</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#who-should-read"><i class="fa fa-check"></i><b>1.2</b> Who should read this book</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-you-will-get"><i class="fa fa-check"></i><b>1.3</b> What you will get out of this book</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#what-you-will-not-learn"><i class="fa fa-check"></i><b>1.4</b> What you will not learn</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#meta-techniques"><i class="fa fa-check"></i><b>1.5</b> Meta-techniques</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#recommended-reading"><i class="fa fa-check"></i><b>1.6</b> Recommended reading</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>1.7</b> Getting help</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#intro-ack"><i class="fa fa-check"></i><b>1.8</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#conventions"><i class="fa fa-check"></i><b>1.9</b> Conventions</a></li>
<li class="chapter" data-level="1.10" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>1.10</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Foundations</b></span></li>
<li class="chapter" data-level="" data-path="foundations-intro.html"><a href="foundations-intro.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="2" data-path="names-values.html"><a href="names-values.html"><i class="fa fa-check"></i><b>2</b> Names and values</a>
<ul>
<li class="chapter" data-level="2.1" data-path="names-values.html"><a href="names-values.html#introduction-1"><i class="fa fa-check"></i><b>2.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="names-values.html"><a href="names-values.html#binding-basics"><i class="fa fa-check"></i><b>2.2</b> Binding basics</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="names-values.html"><a href="names-values.html#non-syntactic"><i class="fa fa-check"></i><b>2.2.1</b> Non-syntactic names</a></li>
<li class="chapter" data-level="2.2.2" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>2.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="names-values.html"><a href="names-values.html#copy-on-modify"><i class="fa fa-check"></i><b>2.3</b> Copy-on-modify</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="names-values.html"><a href="names-values.html#tracemem"><i class="fa fa-check"></i><b>2.3.1</b> <code>tracemem()</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="names-values.html"><a href="names-values.html#function-calls"><i class="fa fa-check"></i><b>2.3.2</b> Function calls</a></li>
<li class="chapter" data-level="2.3.3" data-path="names-values.html"><a href="names-values.html#list-references"><i class="fa fa-check"></i><b>2.3.3</b> Lists</a></li>
<li class="chapter" data-level="2.3.4" data-path="names-values.html"><a href="names-values.html#df-modify"><i class="fa fa-check"></i><b>2.3.4</b> Data frames</a></li>
<li class="chapter" data-level="2.3.5" data-path="names-values.html"><a href="names-values.html#character-vectors"><i class="fa fa-check"></i><b>2.3.5</b> Character vectors</a></li>
<li class="chapter" data-level="2.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>2.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="names-values.html"><a href="names-values.html#object-size"><i class="fa fa-check"></i><b>2.4</b> Object size</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>2.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="names-values.html"><a href="names-values.html#modify-in-place"><i class="fa fa-check"></i><b>2.5</b> Modify-in-place</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="names-values.html"><a href="names-values.html#single-binding"><i class="fa fa-check"></i><b>2.5.1</b> Objects with a single binding</a></li>
<li class="chapter" data-level="2.5.2" data-path="names-values.html"><a href="names-values.html#env-modify"><i class="fa fa-check"></i><b>2.5.2</b> Environments</a></li>
<li class="chapter" data-level="2.5.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>2.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="names-values.html"><a href="names-values.html#gc"><i class="fa fa-check"></i><b>2.6</b> Unbinding and the garbage collector</a></li>
<li class="chapter" data-level="2.7" data-path="names-values.html"><a href="names-values.html#names-values-answers"><i class="fa fa-check"></i><b>2.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vectors-chap.html"><a href="vectors-chap.html"><i class="fa fa-check"></i><b>3</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vectors-chap.html"><a href="vectors-chap.html#introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#quiz-1"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="vectors-chap.html"><a href="vectors-chap.html#outline-1"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-vectors"><i class="fa fa-check"></i><b>3.2</b> Atomic vectors</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vectors-chap.html"><a href="vectors-chap.html#scalars"><i class="fa fa-check"></i><b>3.2.1</b> Scalars</a></li>
<li class="chapter" data-level="3.2.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-constructing"><i class="fa fa-check"></i><b>3.2.2</b> Making longer vectors with <code>c()</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="vectors-chap.html"><a href="vectors-chap.html#missing-values"><i class="fa fa-check"></i><b>3.2.3</b> Missing values</a></li>
<li class="chapter" data-level="3.2.4" data-path="vectors-chap.html"><a href="vectors-chap.html#testing-and-coercion"><i class="fa fa-check"></i><b>3.2.4</b> Testing and coercion</a></li>
<li class="chapter" data-level="3.2.5" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>3.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attributes"><i class="fa fa-check"></i><b>3.3</b> Attributes</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="vectors-chap.html"><a href="vectors-chap.html#getting-and-setting"><i class="fa fa-check"></i><b>3.3.1</b> Getting and setting</a></li>
<li class="chapter" data-level="3.3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-names"><i class="fa fa-check"></i><b>3.3.2</b> Names</a></li>
<li class="chapter" data-level="3.3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-dims"><i class="fa fa-check"></i><b>3.3.3</b> Dimensions</a></li>
<li class="chapter" data-level="3.3.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-5"><i class="fa fa-check"></i><b>3.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vectors-chap.html"><a href="vectors-chap.html#s3-atomic-vectors"><i class="fa fa-check"></i><b>3.4</b> S3 atomic vectors</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#factors"><i class="fa fa-check"></i><b>3.4.1</b> Factors</a></li>
<li class="chapter" data-level="3.4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#dates"><i class="fa fa-check"></i><b>3.4.2</b> Dates</a></li>
<li class="chapter" data-level="3.4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#date-times"><i class="fa fa-check"></i><b>3.4.3</b> Date-times</a></li>
<li class="chapter" data-level="3.4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#durations"><i class="fa fa-check"></i><b>3.4.4</b> Durations</a></li>
<li class="chapter" data-level="3.4.5" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-6"><i class="fa fa-check"></i><b>3.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="vectors-chap.html"><a href="vectors-chap.html#lists"><i class="fa fa-check"></i><b>3.5</b> Lists</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="vectors-chap.html"><a href="vectors-chap.html#list-creating"><i class="fa fa-check"></i><b>3.5.1</b> Creating</a></li>
<li class="chapter" data-level="3.5.2" data-path="vectors-chap.html"><a href="vectors-chap.html#list-types"><i class="fa fa-check"></i><b>3.5.2</b> Testing and coercion</a></li>
<li class="chapter" data-level="3.5.3" data-path="vectors-chap.html"><a href="vectors-chap.html#list-array"><i class="fa fa-check"></i><b>3.5.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.5.4" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-7"><i class="fa fa-check"></i><b>3.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="vectors-chap.html"><a href="vectors-chap.html#tibble"><i class="fa fa-check"></i><b>3.6</b> Data frames and tibbles</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="vectors-chap.html"><a href="vectors-chap.html#df-create"><i class="fa fa-check"></i><b>3.6.1</b> Creating</a></li>
<li class="chapter" data-level="3.6.2" data-path="vectors-chap.html"><a href="vectors-chap.html#rownames"><i class="fa fa-check"></i><b>3.6.2</b> Row names</a></li>
<li class="chapter" data-level="3.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#printing"><i class="fa fa-check"></i><b>3.6.3</b> Printing</a></li>
<li class="chapter" data-level="3.6.4" data-path="vectors-chap.html"><a href="vectors-chap.html#safe-subsetting"><i class="fa fa-check"></i><b>3.6.4</b> Subsetting</a></li>
<li class="chapter" data-level="3.6.5" data-path="vectors-chap.html"><a href="vectors-chap.html#df-test-coerce"><i class="fa fa-check"></i><b>3.6.5</b> Testing and coercing</a></li>
<li class="chapter" data-level="3.6.6" data-path="vectors-chap.html"><a href="vectors-chap.html#list-columns"><i class="fa fa-check"></i><b>3.6.6</b> List columns</a></li>
<li class="chapter" data-level="3.6.7" data-path="vectors-chap.html"><a href="vectors-chap.html#matrix-and-data-frame-columns"><i class="fa fa-check"></i><b>3.6.7</b> Matrix and data frame columns</a></li>
<li class="chapter" data-level="3.6.8" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-8"><i class="fa fa-check"></i><b>3.6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="vectors-chap.html"><a href="vectors-chap.html#null"><i class="fa fa-check"></i><b>3.7</b> <code>NULL</code></a></li>
<li class="chapter" data-level="3.8" data-path="vectors-chap.html"><a href="vectors-chap.html#data-structure-answers"><i class="fa fa-check"></i><b>3.8</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>4</b> Subsetting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="subsetting.html"><a href="subsetting.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#quiz-2"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#outline-2"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="subsetting.html"><a href="subsetting.html#subset-multiple"><i class="fa fa-check"></i><b>4.2</b> Selecting multiple elements</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="subsetting.html"><a href="subsetting.html#atomic-vectors-1"><i class="fa fa-check"></i><b>4.2.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="4.2.2" data-path="subsetting.html"><a href="subsetting.html#lists-1"><i class="fa fa-check"></i><b>4.2.2</b> Lists</a></li>
<li class="chapter" data-level="4.2.3" data-path="subsetting.html"><a href="subsetting.html#matrix-subsetting"><i class="fa fa-check"></i><b>4.2.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="4.2.4" data-path="subsetting.html"><a href="subsetting.html#df-subsetting"><i class="fa fa-check"></i><b>4.2.4</b> Data frames and tibbles</a></li>
<li class="chapter" data-level="4.2.5" data-path="subsetting.html"><a href="subsetting.html#simplify-preserve"><i class="fa fa-check"></i><b>4.2.5</b> Preserving dimensionality</a></li>
<li class="chapter" data-level="4.2.6" data-path="subsetting.html"><a href="subsetting.html#exercises-9"><i class="fa fa-check"></i><b>4.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="subsetting.html"><a href="subsetting.html#subset-single"><i class="fa fa-check"></i><b>4.3</b> Selecting a single element</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="subsetting.html"><a href="subsetting.html#section"><i class="fa fa-check"></i><b>4.3.1</b> <code>[[</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="subsetting.html"><a href="subsetting.html#section-1"><i class="fa fa-check"></i><b>4.3.2</b> <code>$</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="subsetting.html"><a href="subsetting.html#subsetting-oob"><i class="fa fa-check"></i><b>4.3.3</b> Missing and out-of-bounds indices</a></li>
<li class="chapter" data-level="4.3.4" data-path="subsetting.html"><a href="subsetting.html#and-slot"><i class="fa fa-check"></i><b>4.3.4</b> <code>@</code> and <code>slot()</code></a></li>
<li class="chapter" data-level="4.3.5" data-path="subsetting.html"><a href="subsetting.html#exercises-10"><i class="fa fa-check"></i><b>4.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="subsetting.html"><a href="subsetting.html#subassignment"><i class="fa fa-check"></i><b>4.4</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="4.5" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>4.5</b> Applications</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="subsetting.html"><a href="subsetting.html#lookup-tables"><i class="fa fa-check"></i><b>4.5.1</b> Lookup tables (character subsetting)</a></li>
<li class="chapter" data-level="4.5.2" data-path="subsetting.html"><a href="subsetting.html#matching-merging"><i class="fa fa-check"></i><b>4.5.2</b> Matching and merging by hand (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.3" data-path="subsetting.html"><a href="subsetting.html#random-samples-and-bootstraps-integer-subsetting"><i class="fa fa-check"></i><b>4.5.3</b> Random samples and bootstraps (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.4" data-path="subsetting.html"><a href="subsetting.html#ordering-integer-subsetting"><i class="fa fa-check"></i><b>4.5.4</b> Ordering (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.5" data-path="subsetting.html"><a href="subsetting.html#expanding-aggregated-counts-integer-subsetting"><i class="fa fa-check"></i><b>4.5.5</b> Expanding aggregated counts (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.6" data-path="subsetting.html"><a href="subsetting.html#removing-columns-from-data-frames-character"><i class="fa fa-check"></i><b>4.5.6</b> Removing columns from data frames (character )</a></li>
<li class="chapter" data-level="4.5.7" data-path="subsetting.html"><a href="subsetting.html#selecting-rows-based-on-a-condition-logical-subsetting"><i class="fa fa-check"></i><b>4.5.7</b> Selecting rows based on a condition (logical subsetting)</a></li>
<li class="chapter" data-level="4.5.8" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra-versus-sets-logical-and-integer"><i class="fa fa-check"></i><b>4.5.8</b> Boolean algebra versus sets (logical and integer )</a></li>
<li class="chapter" data-level="4.5.9" data-path="subsetting.html"><a href="subsetting.html#exercises-11"><i class="fa fa-check"></i><b>4.5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="subsetting.html"><a href="subsetting.html#subsetting-answers"><i class="fa fa-check"></i><b>4.6</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>5</b> Control flow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="control-flow.html"><a href="control-flow.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#quiz-3"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#outline-3"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="control-flow.html"><a href="control-flow.html#choices"><i class="fa fa-check"></i><b>5.2</b> Choices</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="control-flow.html"><a href="control-flow.html#invalid-inputs"><i class="fa fa-check"></i><b>5.2.1</b> Invalid inputs</a></li>
<li class="chapter" data-level="5.2.2" data-path="control-flow.html"><a href="control-flow.html#vectorised-if"><i class="fa fa-check"></i><b>5.2.2</b> Vectorised if</a></li>
<li class="chapter" data-level="5.2.3" data-path="control-flow.html"><a href="control-flow.html#switch"><i class="fa fa-check"></i><b>5.2.3</b> <code>switch()</code> statement</a></li>
<li class="chapter" data-level="5.2.4" data-path="control-flow.html"><a href="control-flow.html#exercises-12"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="control-flow.html"><a href="control-flow.html#loops"><i class="fa fa-check"></i><b>5.3</b> Loops</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="control-flow.html"><a href="control-flow.html#common-pitfalls"><i class="fa fa-check"></i><b>5.3.1</b> Common pitfalls</a></li>
<li class="chapter" data-level="5.3.2" data-path="control-flow.html"><a href="control-flow.html#for-family"><i class="fa fa-check"></i><b>5.3.2</b> Related tools</a></li>
<li class="chapter" data-level="5.3.3" data-path="control-flow.html"><a href="control-flow.html#exercises-13"><i class="fa fa-check"></i><b>5.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="control-flow.html"><a href="control-flow.html#control-flow-answers"><i class="fa fa-check"></i><b>5.4</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#quiz-4"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#outline-4"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#function-fundamentals"><i class="fa fa-check"></i><b>6.2</b> Function fundamentals</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="functions.html"><a href="functions.html#fun-components"><i class="fa fa-check"></i><b>6.2.1</b> Function components</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions.html"><a href="functions.html#primitive-functions"><i class="fa fa-check"></i><b>6.2.2</b> Primitive functions</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions.html"><a href="functions.html#first-class-functions"><i class="fa fa-check"></i><b>6.2.3</b> First-class functions</a></li>
<li class="chapter" data-level="6.2.4" data-path="functions.html"><a href="functions.html#invoking-a-function"><i class="fa fa-check"></i><b>6.2.4</b> Invoking a function</a></li>
<li class="chapter" data-level="6.2.5" data-path="functions.html"><a href="functions.html#exercises-14"><i class="fa fa-check"></i><b>6.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#function-composition"><i class="fa fa-check"></i><b>6.3</b> Function composition</a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i><b>6.4</b> Lexical scoping</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="functions.html"><a href="functions.html#name-masking"><i class="fa fa-check"></i><b>6.4.1</b> Name masking</a></li>
<li class="chapter" data-level="6.4.2" data-path="functions.html"><a href="functions.html#functions-versus-variables"><i class="fa fa-check"></i><b>6.4.2</b> Functions versus variables</a></li>
<li class="chapter" data-level="6.4.3" data-path="functions.html"><a href="functions.html#fresh-start"><i class="fa fa-check"></i><b>6.4.3</b> A fresh start</a></li>
<li class="chapter" data-level="6.4.4" data-path="functions.html"><a href="functions.html#dynamic-lookup"><i class="fa fa-check"></i><b>6.4.4</b> Dynamic lookup</a></li>
<li class="chapter" data-level="6.4.5" data-path="functions.html"><a href="functions.html#exercises-15"><i class="fa fa-check"></i><b>6.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i><b>6.5</b> Lazy evaluation</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i><b>6.5.1</b> Promises</a></li>
<li class="chapter" data-level="6.5.2" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i><b>6.5.2</b> Default arguments</a></li>
<li class="chapter" data-level="6.5.3" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i><b>6.5.3</b> Missing arguments</a></li>
<li class="chapter" data-level="6.5.4" data-path="functions.html"><a href="functions.html#exercises-16"><i class="fa fa-check"></i><b>6.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="functions.html"><a href="functions.html#fun-dot-dot-dot"><i class="fa fa-check"></i><b>6.6</b> <code>...</code> (dot-dot-dot)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="functions.html"><a href="functions.html#exercises-17"><i class="fa fa-check"></i><b>6.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="functions.html"><a href="functions.html#exiting-a-function"><i class="fa fa-check"></i><b>6.7</b> Exiting a function</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="functions.html"><a href="functions.html#implicit-versus-explicit-returns"><i class="fa fa-check"></i><b>6.7.1</b> Implicit versus explicit returns</a></li>
<li class="chapter" data-level="6.7.2" data-path="functions.html"><a href="functions.html#invisible"><i class="fa fa-check"></i><b>6.7.2</b> Invisible values</a></li>
<li class="chapter" data-level="6.7.3" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>6.7.3</b> Errors</a></li>
<li class="chapter" data-level="6.7.4" data-path="functions.html"><a href="functions.html#on-exit"><i class="fa fa-check"></i><b>6.7.4</b> Exit handlers</a></li>
<li class="chapter" data-level="6.7.5" data-path="functions.html"><a href="functions.html#exercises-18"><i class="fa fa-check"></i><b>6.7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="functions.html"><a href="functions.html#function-forms"><i class="fa fa-check"></i><b>6.8</b> Function forms</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="functions.html"><a href="functions.html#prefix-transform"><i class="fa fa-check"></i><b>6.8.1</b> Rewriting to prefix form</a></li>
<li class="chapter" data-level="6.8.2" data-path="functions.html"><a href="functions.html#prefix-form"><i class="fa fa-check"></i><b>6.8.2</b> Prefix form</a></li>
<li class="chapter" data-level="6.8.3" data-path="functions.html"><a href="functions.html#infix-functions"><i class="fa fa-check"></i><b>6.8.3</b> Infix functions</a></li>
<li class="chapter" data-level="6.8.4" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i><b>6.8.4</b> Replacement functions</a></li>
<li class="chapter" data-level="6.8.5" data-path="functions.html"><a href="functions.html#special-forms"><i class="fa fa-check"></i><b>6.8.5</b> Special forms</a></li>
<li class="chapter" data-level="6.8.6" data-path="functions.html"><a href="functions.html#exercises-19"><i class="fa fa-check"></i><b>6.8.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="functions.html"><a href="functions.html#function-answers"><i class="fa fa-check"></i><b>6.9</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="environments.html"><a href="environments.html"><i class="fa fa-check"></i><b>7</b> Environments</a>
<ul>
<li class="chapter" data-level="7.1" data-path="environments.html"><a href="environments.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#quiz-5"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#outline-5"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="environments.html"><a href="environments.html#env-basics"><i class="fa fa-check"></i><b>7.2</b> Environment basics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>7.2.1</b> Basics</a></li>
<li class="chapter" data-level="7.2.2" data-path="environments.html"><a href="environments.html#important-environments"><i class="fa fa-check"></i><b>7.2.2</b> Important environments</a></li>
<li class="chapter" data-level="7.2.3" data-path="environments.html"><a href="environments.html#parents"><i class="fa fa-check"></i><b>7.2.3</b> Parents</a></li>
<li class="chapter" data-level="7.2.4" data-path="environments.html"><a href="environments.html#super-assignment--"><i class="fa fa-check"></i><b>7.2.4</b> Super assignment, <code>&lt;&lt;-</code></a></li>
<li class="chapter" data-level="7.2.5" data-path="environments.html"><a href="environments.html#getting-and-setting-1"><i class="fa fa-check"></i><b>7.2.5</b> Getting and setting</a></li>
<li class="chapter" data-level="7.2.6" data-path="environments.html"><a href="environments.html#advanced-bindings"><i class="fa fa-check"></i><b>7.2.6</b> Advanced bindings</a></li>
<li class="chapter" data-level="7.2.7" data-path="environments.html"><a href="environments.html#exercises-20"><i class="fa fa-check"></i><b>7.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="environments.html"><a href="environments.html#env-recursion"><i class="fa fa-check"></i><b>7.3</b> Recursing over environments</a>
<ul>
<li class="chapter" data-level="" data-path="environments.html"><a href="environments.html#iteration-versus-recursion"><i class="fa fa-check"></i>Iteration versus recursion</a></li>
<li class="chapter" data-level="7.3.1" data-path="environments.html"><a href="environments.html#exercises-21"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="environments.html"><a href="environments.html#special-environments"><i class="fa fa-check"></i><b>7.4</b> Special environments</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="environments.html"><a href="environments.html#search-path"><i class="fa fa-check"></i><b>7.4.1</b> Package environments and the search path</a></li>
<li class="chapter" data-level="7.4.2" data-path="environments.html"><a href="environments.html#function-environments"><i class="fa fa-check"></i><b>7.4.2</b> The function environment</a></li>
<li class="chapter" data-level="7.4.3" data-path="environments.html"><a href="environments.html#namespaces"><i class="fa fa-check"></i><b>7.4.3</b> Namespaces</a></li>
<li class="chapter" data-level="7.4.4" data-path="environments.html"><a href="environments.html#execution-environments"><i class="fa fa-check"></i><b>7.4.4</b> Execution environments</a></li>
<li class="chapter" data-level="7.4.5" data-path="environments.html"><a href="environments.html#exercises-22"><i class="fa fa-check"></i><b>7.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="environments.html"><a href="environments.html#call-stack"><i class="fa fa-check"></i><b>7.5</b> Call stacks</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="environments.html"><a href="environments.html#simple-stack"><i class="fa fa-check"></i><b>7.5.1</b> Simple call stacks</a></li>
<li class="chapter" data-level="7.5.2" data-path="environments.html"><a href="environments.html#lazy-call-stack"><i class="fa fa-check"></i><b>7.5.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="7.5.3" data-path="environments.html"><a href="environments.html#frames"><i class="fa fa-check"></i><b>7.5.3</b> Frames</a></li>
<li class="chapter" data-level="7.5.4" data-path="environments.html"><a href="environments.html#dynamic-scope"><i class="fa fa-check"></i><b>7.5.4</b> Dynamic scope</a></li>
<li class="chapter" data-level="7.5.5" data-path="environments.html"><a href="environments.html#exercises-23"><i class="fa fa-check"></i><b>7.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="environments.html"><a href="environments.html#explicit-envs"><i class="fa fa-check"></i><b>7.6</b> As data structures</a></li>
<li class="chapter" data-level="7.7" data-path="environments.html"><a href="environments.html#env-answers"><i class="fa fa-check"></i><b>7.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="conditions.html"><a href="conditions.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#quiz-6"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="conditions.html"><a href="conditions.html#outline-6"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="8.1.1" data-path="conditions.html"><a href="conditions.html#prerequisites-2"><i class="fa fa-check"></i><b>8.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#signalling-conditions"><i class="fa fa-check"></i><b>8.2</b> Signalling conditions</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="conditions.html"><a href="conditions.html#errors-1"><i class="fa fa-check"></i><b>8.2.1</b> Errors</a></li>
<li class="chapter" data-level="8.2.2" data-path="conditions.html"><a href="conditions.html#warnings"><i class="fa fa-check"></i><b>8.2.2</b> Warnings</a></li>
<li class="chapter" data-level="8.2.3" data-path="conditions.html"><a href="conditions.html#messages"><i class="fa fa-check"></i><b>8.2.3</b> Messages</a></li>
<li class="chapter" data-level="8.2.4" data-path="conditions.html"><a href="conditions.html#exercises-24"><i class="fa fa-check"></i><b>8.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#ignoring-conditions"><i class="fa fa-check"></i><b>8.3</b> Ignoring conditions</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#handling-conditions"><i class="fa fa-check"></i><b>8.4</b> Handling conditions</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="conditions.html"><a href="conditions.html#condition-objects"><i class="fa fa-check"></i><b>8.4.1</b> Condition objects</a></li>
<li class="chapter" data-level="8.4.2" data-path="conditions.html"><a href="conditions.html#exiting-handlers"><i class="fa fa-check"></i><b>8.4.2</b> Exiting handlers</a></li>
<li class="chapter" data-level="8.4.3" data-path="conditions.html"><a href="conditions.html#calling-handlers"><i class="fa fa-check"></i><b>8.4.3</b> Calling handlers</a></li>
<li class="chapter" data-level="8.4.4" data-path="conditions.html"><a href="conditions.html#call-stacks"><i class="fa fa-check"></i><b>8.4.4</b> Call stacks</a></li>
<li class="chapter" data-level="8.4.5" data-path="conditions.html"><a href="conditions.html#exercises-25"><i class="fa fa-check"></i><b>8.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#custom-conditions"><i class="fa fa-check"></i><b>8.5</b> Custom conditions</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="conditions.html"><a href="conditions.html#motivation"><i class="fa fa-check"></i><b>8.5.1</b> Motivation</a></li>
<li class="chapter" data-level="8.5.2" data-path="conditions.html"><a href="conditions.html#signalling"><i class="fa fa-check"></i><b>8.5.2</b> Signalling</a></li>
<li class="chapter" data-level="8.5.3" data-path="conditions.html"><a href="conditions.html#handling"><i class="fa fa-check"></i><b>8.5.3</b> Handling</a></li>
<li class="chapter" data-level="8.5.4" data-path="conditions.html"><a href="conditions.html#exercises-26"><i class="fa fa-check"></i><b>8.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#condition-applications"><i class="fa fa-check"></i><b>8.6</b> Applications</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="conditions.html"><a href="conditions.html#failure-value"><i class="fa fa-check"></i><b>8.6.1</b> Failure value</a></li>
<li class="chapter" data-level="8.6.2" data-path="conditions.html"><a href="conditions.html#try-success-failure"><i class="fa fa-check"></i><b>8.6.2</b> Success and failure values</a></li>
<li class="chapter" data-level="8.6.3" data-path="conditions.html"><a href="conditions.html#resignal"><i class="fa fa-check"></i><b>8.6.3</b> Resignal</a></li>
<li class="chapter" data-level="8.6.4" data-path="conditions.html"><a href="conditions.html#record"><i class="fa fa-check"></i><b>8.6.4</b> Record</a></li>
<li class="chapter" data-level="8.6.5" data-path="conditions.html"><a href="conditions.html#no-default-behaviour"><i class="fa fa-check"></i><b>8.6.5</b> No default behaviour</a></li>
<li class="chapter" data-level="8.6.6" data-path="conditions.html"><a href="conditions.html#exercises-27"><i class="fa fa-check"></i><b>8.6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="conditions.html"><a href="conditions.html#conditions-answers"><i class="fa fa-check"></i><b>8.7</b> Quiz answers</a></li>
</ul></li>
<li class="part"><span><b>II Functional programming</b></span></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html#functional-programming-languages"><i class="fa fa-check"></i>Functional programming languages</a></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html#functional-style"><i class="fa fa-check"></i>Functional style</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>9</b> Functionals</a>
<ul>
<li class="chapter" data-level="9.1" data-path="functionals.html"><a href="functionals.html#introduction-8"><i class="fa fa-check"></i><b>9.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#outline-7"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="functionals.html"><a href="functionals.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="functionals.html"><a href="functionals.html#map"><i class="fa fa-check"></i><b>9.2</b> My first functional: <code>map()</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="functionals.html"><a href="functionals.html#map-atomic"><i class="fa fa-check"></i><b>9.2.1</b> Producing atomic vectors</a></li>
<li class="chapter" data-level="9.2.2" data-path="functionals.html"><a href="functionals.html#purrr-shortcuts"><i class="fa fa-check"></i><b>9.2.2</b> Anonymous functions and shortcuts</a></li>
<li class="chapter" data-level="9.2.3" data-path="functionals.html"><a href="functionals.html#passing-arguments"><i class="fa fa-check"></i><b>9.2.3</b> Passing arguments with <code>...</code></a></li>
<li class="chapter" data-level="9.2.4" data-path="functionals.html"><a href="functionals.html#argument-names"><i class="fa fa-check"></i><b>9.2.4</b> Argument names</a></li>
<li class="chapter" data-level="9.2.5" data-path="functionals.html"><a href="functionals.html#change-argument"><i class="fa fa-check"></i><b>9.2.5</b> Varying another argument</a></li>
<li class="chapter" data-level="9.2.6" data-path="functionals.html"><a href="functionals.html#exercises-28"><i class="fa fa-check"></i><b>9.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="functionals.html"><a href="functionals.html#purrr-style"><i class="fa fa-check"></i><b>9.3</b> Purrr style</a></li>
<li class="chapter" data-level="9.4" data-path="functionals.html"><a href="functionals.html#map-variants"><i class="fa fa-check"></i><b>9.4</b> Map variants</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="functionals.html"><a href="functionals.html#modify"><i class="fa fa-check"></i><b>9.4.1</b> Same type of output as input: <code>modify()</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="functionals.html"><a href="functionals.html#map2"><i class="fa fa-check"></i><b>9.4.2</b> Two inputs: <code>map2()</code> and friends</a></li>
<li class="chapter" data-level="9.4.3" data-path="functionals.html"><a href="functionals.html#no-outputs-walk-and-friends"><i class="fa fa-check"></i><b>9.4.3</b> No outputs: <code>walk()</code> and friends</a></li>
<li class="chapter" data-level="9.4.4" data-path="functionals.html"><a href="functionals.html#iterating-over-values-and-indices"><i class="fa fa-check"></i><b>9.4.4</b> Iterating over values and indices</a></li>
<li class="chapter" data-level="9.4.5" data-path="functionals.html"><a href="functionals.html#pmap"><i class="fa fa-check"></i><b>9.4.5</b> Any number of inputs: <code>pmap()</code> and friends</a></li>
<li class="chapter" data-level="9.4.6" data-path="functionals.html"><a href="functionals.html#exercises-29"><i class="fa fa-check"></i><b>9.4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="functionals.html"><a href="functionals.html#reduce"><i class="fa fa-check"></i><b>9.5</b> Reduce family</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="functionals.html"><a href="functionals.html#basics-1"><i class="fa fa-check"></i><b>9.5.1</b> Basics</a></li>
<li class="chapter" data-level="9.5.2" data-path="functionals.html"><a href="functionals.html#accumulate"><i class="fa fa-check"></i><b>9.5.2</b> Accumulate</a></li>
<li class="chapter" data-level="9.5.3" data-path="functionals.html"><a href="functionals.html#output-types"><i class="fa fa-check"></i><b>9.5.3</b> Output types</a></li>
<li class="chapter" data-level="9.5.4" data-path="functionals.html"><a href="functionals.html#multiple-inputs"><i class="fa fa-check"></i><b>9.5.4</b> Multiple inputs</a></li>
<li class="chapter" data-level="9.5.5" data-path="functionals.html"><a href="functionals.html#map-reduce"><i class="fa fa-check"></i><b>9.5.5</b> Map-reduce</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="functionals.html"><a href="functionals.html#predicate-functionals"><i class="fa fa-check"></i><b>9.6</b> Predicate functionals</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="functionals.html"><a href="functionals.html#basics-2"><i class="fa fa-check"></i><b>9.6.1</b> Basics</a></li>
<li class="chapter" data-level="9.6.2" data-path="functionals.html"><a href="functionals.html#predicate-map"><i class="fa fa-check"></i><b>9.6.2</b> Map variants</a></li>
<li class="chapter" data-level="9.6.3" data-path="functionals.html"><a href="functionals.html#exercises-30"><i class="fa fa-check"></i><b>9.6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="functionals.html"><a href="functionals.html#base-functionals"><i class="fa fa-check"></i><b>9.7</b> Base functionals</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="functionals.html"><a href="functionals.html#matrices-and-arrays"><i class="fa fa-check"></i><b>9.7.1</b> Matrices and arrays</a></li>
<li class="chapter" data-level="9.7.2" data-path="functionals.html"><a href="functionals.html#mathematical-concerns"><i class="fa fa-check"></i><b>9.7.2</b> Mathematical concerns</a></li>
<li class="chapter" data-level="9.7.3" data-path="functionals.html"><a href="functionals.html#exercises-31"><i class="fa fa-check"></i><b>9.7.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="function-factories.html"><a href="function-factories.html"><i class="fa fa-check"></i><b>10</b> Function factories</a>
<ul>
<li class="chapter" data-level="10.1" data-path="function-factories.html"><a href="function-factories.html#introduction-9"><i class="fa fa-check"></i><b>10.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#outline-8"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-factories.html"><a href="function-factories.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="function-factories.html"><a href="function-factories.html#factory-fundamentals"><i class="fa fa-check"></i><b>10.2</b> Factory fundamentals</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="function-factories.html"><a href="function-factories.html#environments-1"><i class="fa fa-check"></i><b>10.2.1</b> Environments</a></li>
<li class="chapter" data-level="10.2.2" data-path="function-factories.html"><a href="function-factories.html#diagram-conventions"><i class="fa fa-check"></i><b>10.2.2</b> Diagram conventions</a></li>
<li class="chapter" data-level="10.2.3" data-path="function-factories.html"><a href="function-factories.html#forcing-evaluation"><i class="fa fa-check"></i><b>10.2.3</b> Forcing evaluation</a></li>
<li class="chapter" data-level="10.2.4" data-path="function-factories.html"><a href="function-factories.html#stateful-funs"><i class="fa fa-check"></i><b>10.2.4</b> Stateful functions</a></li>
<li class="chapter" data-level="10.2.5" data-path="function-factories.html"><a href="function-factories.html#factory-pitfalls"><i class="fa fa-check"></i><b>10.2.5</b> Garbage collection</a></li>
<li class="chapter" data-level="10.2.6" data-path="function-factories.html"><a href="function-factories.html#exercises-32"><i class="fa fa-check"></i><b>10.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="function-factories.html"><a href="function-factories.html#graph-fact"><i class="fa fa-check"></i><b>10.3</b> Graphical factories</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="function-factories.html"><a href="function-factories.html#labelling"><i class="fa fa-check"></i><b>10.3.1</b> Labelling</a></li>
<li class="chapter" data-level="10.3.2" data-path="function-factories.html"><a href="function-factories.html#histogram-bins"><i class="fa fa-check"></i><b>10.3.2</b> Histogram bins</a></li>
<li class="chapter" data-level="10.3.3" data-path="function-factories.html"><a href="function-factories.html#ggsave"><i class="fa fa-check"></i><b>10.3.3</b> <code>ggsave()</code></a></li>
<li class="chapter" data-level="10.3.4" data-path="function-factories.html"><a href="function-factories.html#exercises-33"><i class="fa fa-check"></i><b>10.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="function-factories.html"><a href="function-factories.html#stat-fact"><i class="fa fa-check"></i><b>10.4</b> Statistical factories</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="function-factories.html"><a href="function-factories.html#box-cox-transformation"><i class="fa fa-check"></i><b>10.4.1</b> Box-Cox transformation</a></li>
<li class="chapter" data-level="10.4.2" data-path="function-factories.html"><a href="function-factories.html#bootstrap-generators"><i class="fa fa-check"></i><b>10.4.2</b> Bootstrap generators</a></li>
<li class="chapter" data-level="10.4.3" data-path="function-factories.html"><a href="function-factories.html#MLE"><i class="fa fa-check"></i><b>10.4.3</b> Maximum likelihood estimation</a></li>
<li class="chapter" data-level="10.4.4" data-path="function-factories.html"><a href="function-factories.html#exercises-34"><i class="fa fa-check"></i><b>10.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="function-factories.html"><a href="function-factories.html#functional-factories"><i class="fa fa-check"></i><b>10.5</b> Function factories + functionals</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="function-factories.html"><a href="function-factories.html#exercises-35"><i class="fa fa-check"></i><b>10.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="function-operators.html"><a href="function-operators.html"><i class="fa fa-check"></i><b>11</b> Function operators</a>
<ul>
<li class="chapter" data-level="11.1" data-path="function-operators.html"><a href="function-operators.html#introduction-10"><i class="fa fa-check"></i><b>11.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#outline-9"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="function-operators.html"><a href="function-operators.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="function-operators.html"><a href="function-operators.html#existing-fos"><i class="fa fa-check"></i><b>11.2</b> Existing function operators</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="function-operators.html"><a href="function-operators.html#safely"><i class="fa fa-check"></i><b>11.2.1</b> Capturing errors with <code>purrr::safely()</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="function-operators.html"><a href="function-operators.html#memoise"><i class="fa fa-check"></i><b>11.2.2</b> Caching computations with <code>memoise::memoise()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="function-operators.html"><a href="function-operators.html#exercises-36"><i class="fa fa-check"></i><b>11.2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="function-operators.html"><a href="function-operators.html#fo-case-study"><i class="fa fa-check"></i><b>11.3</b> Case study: Creating your own function operators</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="function-operators.html"><a href="function-operators.html#exercises-37"><i class="fa fa-check"></i><b>11.3.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Object-oriented programming</b></span></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#oop-systems"><i class="fa fa-check"></i>OOP systems</a></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#oop-in-r"><i class="fa fa-check"></i>OOP in R</a></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#sloop"><i class="fa fa-check"></i>sloop</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="base-types.html"><a href="base-types.html"><i class="fa fa-check"></i><b>12</b> Base types</a>
<ul>
<li class="chapter" data-level="12.1" data-path="base-types.html"><a href="base-types.html#introduction-11"><i class="fa fa-check"></i><b>12.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="base-types.html"><a href="base-types.html#outline-10"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="base-types.html"><a href="base-types.html#base-vs-oo"><i class="fa fa-check"></i><b>12.2</b> Base versus OO objects</a></li>
<li class="chapter" data-level="12.3" data-path="base-types.html"><a href="base-types.html#base-types-2"><i class="fa fa-check"></i><b>12.3</b> Base types</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="base-types.html"><a href="base-types.html#numeric-type"><i class="fa fa-check"></i><b>12.3.1</b> Numeric type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>13</b> S3</a>
<ul>
<li class="chapter" data-level="13.1" data-path="s3.html"><a href="s3.html#introduction-12"><i class="fa fa-check"></i><b>13.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#outline-11"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s3.html"><a href="s3.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="s3.html"><a href="s3.html#s3-basics"><i class="fa fa-check"></i><b>13.2</b> Basics</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="s3.html"><a href="s3.html#exercises-38"><i class="fa fa-check"></i><b>13.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="s3.html"><a href="s3.html#s3-classes"><i class="fa fa-check"></i><b>13.3</b> Classes</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="s3.html"><a href="s3.html#s3-constructor"><i class="fa fa-check"></i><b>13.3.1</b> Constructors</a></li>
<li class="chapter" data-level="13.3.2" data-path="s3.html"><a href="s3.html#validators"><i class="fa fa-check"></i><b>13.3.2</b> Validators</a></li>
<li class="chapter" data-level="13.3.3" data-path="s3.html"><a href="s3.html#helpers"><i class="fa fa-check"></i><b>13.3.3</b> Helpers</a></li>
<li class="chapter" data-level="13.3.4" data-path="s3.html"><a href="s3.html#exercises-39"><i class="fa fa-check"></i><b>13.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="s3.html"><a href="s3.html#s3-methods"><i class="fa fa-check"></i><b>13.4</b> Generics and methods</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="s3.html"><a href="s3.html#method-dispatch"><i class="fa fa-check"></i><b>13.4.1</b> Method dispatch</a></li>
<li class="chapter" data-level="13.4.2" data-path="s3.html"><a href="s3.html#finding-methods"><i class="fa fa-check"></i><b>13.4.2</b> Finding methods</a></li>
<li class="chapter" data-level="13.4.3" data-path="s3.html"><a href="s3.html#s3-arguments"><i class="fa fa-check"></i><b>13.4.3</b> Creating methods</a></li>
<li class="chapter" data-level="13.4.4" data-path="s3.html"><a href="s3.html#exercises-40"><i class="fa fa-check"></i><b>13.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="s3.html"><a href="s3.html#object-styles"><i class="fa fa-check"></i><b>13.5</b> Object styles</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="s3.html"><a href="s3.html#exercises-41"><i class="fa fa-check"></i><b>13.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="s3.html"><a href="s3.html#s3-inheritance"><i class="fa fa-check"></i><b>13.6</b> Inheritance</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="s3.html"><a href="s3.html#nextmethod"><i class="fa fa-check"></i><b>13.6.1</b> <code>NextMethod()</code></a></li>
<li class="chapter" data-level="13.6.2" data-path="s3.html"><a href="s3.html#s3-subclassing"><i class="fa fa-check"></i><b>13.6.2</b> Allowing subclassing</a></li>
<li class="chapter" data-level="13.6.3" data-path="s3.html"><a href="s3.html#exercises-42"><i class="fa fa-check"></i><b>13.6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="s3.html"><a href="s3.html#s3-dispatch"><i class="fa fa-check"></i><b>13.7</b> Dispatch details</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="s3.html"><a href="s3.html#implicit-class"><i class="fa fa-check"></i><b>13.7.1</b> S3 and base types</a></li>
<li class="chapter" data-level="13.7.2" data-path="s3.html"><a href="s3.html#internal-generics"><i class="fa fa-check"></i><b>13.7.2</b> Internal generics</a></li>
<li class="chapter" data-level="13.7.3" data-path="s3.html"><a href="s3.html#group-generics"><i class="fa fa-check"></i><b>13.7.3</b> Group generics</a></li>
<li class="chapter" data-level="13.7.4" data-path="s3.html"><a href="s3.html#double-dispatch"><i class="fa fa-check"></i><b>13.7.4</b> Double dispatch</a></li>
<li class="chapter" data-level="13.7.5" data-path="s3.html"><a href="s3.html#exercises-43"><i class="fa fa-check"></i><b>13.7.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>14</b> R6</a>
<ul>
<li class="chapter" data-level="14.1" data-path="r6.html"><a href="r6.html#introduction-13"><i class="fa fa-check"></i><b>14.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="r6.html"><a href="r6.html#outline-12"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="r6.html"><a href="r6.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="r6.html"><a href="r6.html#r6-classes"><i class="fa fa-check"></i><b>14.2</b> Classes and methods</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="r6.html"><a href="r6.html#method-chaining"><i class="fa fa-check"></i><b>14.2.1</b> Method chaining</a></li>
<li class="chapter" data-level="14.2.2" data-path="r6.html"><a href="r6.html#r6-important-methods"><i class="fa fa-check"></i><b>14.2.2</b> Important methods</a></li>
<li class="chapter" data-level="14.2.3" data-path="r6.html"><a href="r6.html#adding-methods-after-creation"><i class="fa fa-check"></i><b>14.2.3</b> Adding methods after creation</a></li>
<li class="chapter" data-level="14.2.4" data-path="r6.html"><a href="r6.html#inheritance"><i class="fa fa-check"></i><b>14.2.4</b> Inheritance</a></li>
<li class="chapter" data-level="14.2.5" data-path="r6.html"><a href="r6.html#introspection"><i class="fa fa-check"></i><b>14.2.5</b> Introspection</a></li>
<li class="chapter" data-level="14.2.6" data-path="r6.html"><a href="r6.html#exercises-44"><i class="fa fa-check"></i><b>14.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="r6.html"><a href="r6.html#r6-access"><i class="fa fa-check"></i><b>14.3</b> Controlling access</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="r6.html"><a href="r6.html#privacy"><i class="fa fa-check"></i><b>14.3.1</b> Privacy</a></li>
<li class="chapter" data-level="14.3.2" data-path="r6.html"><a href="r6.html#active-fields"><i class="fa fa-check"></i><b>14.3.2</b> Active fields</a></li>
<li class="chapter" data-level="14.3.3" data-path="r6.html"><a href="r6.html#exercises-45"><i class="fa fa-check"></i><b>14.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="r6.html"><a href="r6.html#r6-semantics"><i class="fa fa-check"></i><b>14.4</b> Reference semantics</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="r6.html"><a href="r6.html#reasoning"><i class="fa fa-check"></i><b>14.4.1</b> Reasoning</a></li>
<li class="chapter" data-level="14.4.2" data-path="r6.html"><a href="r6.html#finalizer"><i class="fa fa-check"></i><b>14.4.2</b> Finalizer</a></li>
<li class="chapter" data-level="14.4.3" data-path="r6.html"><a href="r6.html#r6-fields"><i class="fa fa-check"></i><b>14.4.3</b> R6 fields</a></li>
<li class="chapter" data-level="14.4.4" data-path="r6.html"><a href="r6.html#exercises-46"><i class="fa fa-check"></i><b>14.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="r6.html"><a href="r6.html#why-r6"><i class="fa fa-check"></i><b>14.5</b> Why R6?</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="s4.html"><a href="s4.html"><i class="fa fa-check"></i><b>15</b> S4</a>
<ul>
<li class="chapter" data-level="15.1" data-path="s4.html"><a href="s4.html#introduction-14"><i class="fa fa-check"></i><b>15.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#outline-13"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#learning-more"><i class="fa fa-check"></i>Learning more</a></li>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#prerequisites-8"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="s4.html"><a href="s4.html#s4-basics"><i class="fa fa-check"></i><b>15.2</b> Basics</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="s4.html"><a href="s4.html#exercises-47"><i class="fa fa-check"></i><b>15.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="s4.html"><a href="s4.html#s4-classes"><i class="fa fa-check"></i><b>15.3</b> Classes</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="s4.html"><a href="s4.html#inheritance-1"><i class="fa fa-check"></i><b>15.3.1</b> Inheritance</a></li>
<li class="chapter" data-level="15.3.2" data-path="s4.html"><a href="s4.html#introspection-1"><i class="fa fa-check"></i><b>15.3.2</b> Introspection</a></li>
<li class="chapter" data-level="15.3.3" data-path="s4.html"><a href="s4.html#redefinition"><i class="fa fa-check"></i><b>15.3.3</b> Redefinition</a></li>
<li class="chapter" data-level="15.3.4" data-path="s4.html"><a href="s4.html#helper"><i class="fa fa-check"></i><b>15.3.4</b> Helper</a></li>
<li class="chapter" data-level="15.3.5" data-path="s4.html"><a href="s4.html#validator"><i class="fa fa-check"></i><b>15.3.5</b> Validator</a></li>
<li class="chapter" data-level="15.3.6" data-path="s4.html"><a href="s4.html#exercises-48"><i class="fa fa-check"></i><b>15.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="s4.html"><a href="s4.html#s4-generics"><i class="fa fa-check"></i><b>15.4</b> Generics and methods</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="s4.html"><a href="s4.html#signature"><i class="fa fa-check"></i><b>15.4.1</b> Signature</a></li>
<li class="chapter" data-level="15.4.2" data-path="s4.html"><a href="s4.html#methods"><i class="fa fa-check"></i><b>15.4.2</b> Methods</a></li>
<li class="chapter" data-level="15.4.3" data-path="s4.html"><a href="s4.html#show-method"><i class="fa fa-check"></i><b>15.4.3</b> Show method</a></li>
<li class="chapter" data-level="15.4.4" data-path="s4.html"><a href="s4.html#accessors"><i class="fa fa-check"></i><b>15.4.4</b> Accessors</a></li>
<li class="chapter" data-level="15.4.5" data-path="s4.html"><a href="s4.html#exercises-49"><i class="fa fa-check"></i><b>15.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="s4.html"><a href="s4.html#s4-dispatch"><i class="fa fa-check"></i><b>15.5</b> Method dispatch</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="s4.html"><a href="s4.html#single-dispatch"><i class="fa fa-check"></i><b>15.5.1</b> Single dispatch</a></li>
<li class="chapter" data-level="15.5.2" data-path="s4.html"><a href="s4.html#multiple-inheritance"><i class="fa fa-check"></i><b>15.5.2</b> Multiple inheritance</a></li>
<li class="chapter" data-level="15.5.3" data-path="s4.html"><a href="s4.html#multiple-dispatch"><i class="fa fa-check"></i><b>15.5.3</b> Multiple dispatch</a></li>
<li class="chapter" data-level="15.5.4" data-path="s4.html"><a href="s4.html#multiple-dispatch-and-multiple-inheritance"><i class="fa fa-check"></i><b>15.5.4</b> Multiple dispatch and multiple inheritance</a></li>
<li class="chapter" data-level="15.5.5" data-path="s4.html"><a href="s4.html#exercises-50"><i class="fa fa-check"></i><b>15.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="s4.html"><a href="s4.html#s4-s3"><i class="fa fa-check"></i><b>15.6</b> S4 and S3</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="s4.html"><a href="s4.html#classes"><i class="fa fa-check"></i><b>15.6.1</b> Classes</a></li>
<li class="chapter" data-level="15.6.2" data-path="s4.html"><a href="s4.html#generics"><i class="fa fa-check"></i><b>15.6.2</b> Generics</a></li>
<li class="chapter" data-level="15.6.3" data-path="s4.html"><a href="s4.html#exercises-51"><i class="fa fa-check"></i><b>15.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html"><i class="fa fa-check"></i><b>16</b> Trade-offs</a>
<ul>
<li class="chapter" data-level="16.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#introduction-15"><i class="fa fa-check"></i><b>16.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#outline-14"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#prerequisites-9"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-s4"><i class="fa fa-check"></i><b>16.2</b> S4 versus S3</a></li>
<li class="chapter" data-level="16.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-r6"><i class="fa fa-check"></i><b>16.3</b> R6 versus S3</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#namespacing"><i class="fa fa-check"></i><b>16.3.1</b> Namespacing</a></li>
<li class="chapter" data-level="16.3.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#threading-state"><i class="fa fa-check"></i><b>16.3.2</b> Threading state</a></li>
<li class="chapter" data-level="16.3.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#tradeoffs-pipe"><i class="fa fa-check"></i><b>16.3.3</b> Method chaining</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Metaprogramming</b></span></li>
<li class="chapter" data-level="" data-path="metaprogramming.html"><a href="metaprogramming.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="17" data-path="meta-big-picture.html"><a href="meta-big-picture.html"><i class="fa fa-check"></i><b>17</b> Big picture</a>
<ul>
<li class="chapter" data-level="17.1" data-path="meta-big-picture.html"><a href="meta-big-picture.html#introduction-16"><i class="fa fa-check"></i><b>17.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="meta-big-picture.html"><a href="meta-big-picture.html#outline-15"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="meta-big-picture.html"><a href="meta-big-picture.html#prerequisites-10"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="meta-big-picture.html"><a href="meta-big-picture.html#code-data"><i class="fa fa-check"></i><b>17.2</b> Code is data</a></li>
<li class="chapter" data-level="17.3" data-path="meta-big-picture.html"><a href="meta-big-picture.html#code-tree"><i class="fa fa-check"></i><b>17.3</b> Code is a tree</a></li>
<li class="chapter" data-level="17.4" data-path="meta-big-picture.html"><a href="meta-big-picture.html#coding-code"><i class="fa fa-check"></i><b>17.4</b> Code can generate code</a></li>
<li class="chapter" data-level="17.5" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-intro"><i class="fa fa-check"></i><b>17.5</b> Evaluation runs code</a></li>
<li class="chapter" data-level="17.6" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-funs"><i class="fa fa-check"></i><b>17.6</b> Customising evaluation with functions</a></li>
<li class="chapter" data-level="17.7" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-data"><i class="fa fa-check"></i><b>17.7</b> Customising evaluation with data</a></li>
<li class="chapter" data-level="17.8" data-path="meta-big-picture.html"><a href="meta-big-picture.html#quosure-intro"><i class="fa fa-check"></i><b>17.8</b> Quosures</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="expressions.html"><a href="expressions.html"><i class="fa fa-check"></i><b>18</b> Expressions</a>
<ul>
<li class="chapter" data-level="18.1" data-path="expressions.html"><a href="expressions.html#introduction-17"><i class="fa fa-check"></i><b>18.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#outline-16"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="expressions.html"><a href="expressions.html#prerequisites-11"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="expressions.html"><a href="expressions.html#ast"><i class="fa fa-check"></i><b>18.2</b> Abstract syntax trees</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="expressions.html"><a href="expressions.html#drawing"><i class="fa fa-check"></i><b>18.2.1</b> Drawing</a></li>
<li class="chapter" data-level="18.2.2" data-path="expressions.html"><a href="expressions.html#non-code-components"><i class="fa fa-check"></i><b>18.2.2</b> Non-code components</a></li>
<li class="chapter" data-level="18.2.3" data-path="expressions.html"><a href="expressions.html#infix-calls"><i class="fa fa-check"></i><b>18.2.3</b> Infix calls</a></li>
<li class="chapter" data-level="18.2.4" data-path="expressions.html"><a href="expressions.html#exercises-52"><i class="fa fa-check"></i><b>18.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="expressions.html"><a href="expressions.html#expression-details"><i class="fa fa-check"></i><b>18.3</b> Expressions</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="expressions.html"><a href="expressions.html#constants"><i class="fa fa-check"></i><b>18.3.1</b> Constants</a></li>
<li class="chapter" data-level="18.3.2" data-path="expressions.html"><a href="expressions.html#symbols"><i class="fa fa-check"></i><b>18.3.2</b> Symbols</a></li>
<li class="chapter" data-level="18.3.3" data-path="expressions.html"><a href="expressions.html#calls"><i class="fa fa-check"></i><b>18.3.3</b> Calls</a></li>
<li class="chapter" data-level="18.3.4" data-path="expressions.html"><a href="expressions.html#summary"><i class="fa fa-check"></i><b>18.3.4</b> Summary</a></li>
<li class="chapter" data-level="18.3.5" data-path="expressions.html"><a href="expressions.html#exercises-53"><i class="fa fa-check"></i><b>18.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="expressions.html"><a href="expressions.html#grammar"><i class="fa fa-check"></i><b>18.4</b> Parsing and grammar</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="expressions.html"><a href="expressions.html#operator-precedence"><i class="fa fa-check"></i><b>18.4.1</b> Operator precedence</a></li>
<li class="chapter" data-level="18.4.2" data-path="expressions.html"><a href="expressions.html#associativity"><i class="fa fa-check"></i><b>18.4.2</b> Associativity</a></li>
<li class="chapter" data-level="18.4.3" data-path="expressions.html"><a href="expressions.html#parsing"><i class="fa fa-check"></i><b>18.4.3</b> Parsing and deparsing</a></li>
<li class="chapter" data-level="18.4.4" data-path="expressions.html"><a href="expressions.html#exercises-54"><i class="fa fa-check"></i><b>18.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="expressions.html"><a href="expressions.html#ast-funs"><i class="fa fa-check"></i><b>18.5</b> Walking AST with recursive functions</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="expressions.html"><a href="expressions.html#finding-f-and-t"><i class="fa fa-check"></i><b>18.5.1</b> Finding F and T</a></li>
<li class="chapter" data-level="18.5.2" data-path="expressions.html"><a href="expressions.html#finding-all-variables-created-by-assignment"><i class="fa fa-check"></i><b>18.5.2</b> Finding all variables created by assignment</a></li>
<li class="chapter" data-level="18.5.3" data-path="expressions.html"><a href="expressions.html#exercises-55"><i class="fa fa-check"></i><b>18.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="expressions.html"><a href="expressions.html#expression-special"><i class="fa fa-check"></i><b>18.6</b> Specialised data structures</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="expressions.html"><a href="expressions.html#pairlists"><i class="fa fa-check"></i><b>18.6.1</b> Pairlists</a></li>
<li class="chapter" data-level="18.6.2" data-path="expressions.html"><a href="expressions.html#empty-symbol"><i class="fa fa-check"></i><b>18.6.2</b> Missing arguments</a></li>
<li class="chapter" data-level="18.6.3" data-path="expressions.html"><a href="expressions.html#expression-vectors"><i class="fa fa-check"></i><b>18.6.3</b> Expression vectors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>19</b> Quasiquotation</a>
<ul>
<li class="chapter" data-level="19.1" data-path="quasiquotation.html"><a href="quasiquotation.html#introduction-18"><i class="fa fa-check"></i><b>19.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#outline-17"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#prerequisites-12"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#related-work"><i class="fa fa-check"></i>Related work</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-motivation"><i class="fa fa-check"></i><b>19.2</b> Motivation</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="quasiquotation.html"><a href="quasiquotation.html#vocabulary"><i class="fa fa-check"></i><b>19.2.1</b> Vocabulary</a></li>
<li class="chapter" data-level="19.2.2" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-56"><i class="fa fa-check"></i><b>19.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="quasiquotation.html"><a href="quasiquotation.html#quoting"><i class="fa fa-check"></i><b>19.3</b> Quoting</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="quasiquotation.html"><a href="quasiquotation.html#capturing-expressions"><i class="fa fa-check"></i><b>19.3.1</b> Capturing expressions</a></li>
<li class="chapter" data-level="19.3.2" data-path="quasiquotation.html"><a href="quasiquotation.html#capturing-symbols"><i class="fa fa-check"></i><b>19.3.2</b> Capturing symbols</a></li>
<li class="chapter" data-level="19.3.3" data-path="quasiquotation.html"><a href="quasiquotation.html#with-base-r"><i class="fa fa-check"></i><b>19.3.3</b> With base R</a></li>
<li class="chapter" data-level="19.3.4" data-path="quasiquotation.html"><a href="quasiquotation.html#substitution"><i class="fa fa-check"></i><b>19.3.4</b> Substitution</a></li>
<li class="chapter" data-level="19.3.5" data-path="quasiquotation.html"><a href="quasiquotation.html#summary-1"><i class="fa fa-check"></i><b>19.3.5</b> Summary</a></li>
<li class="chapter" data-level="19.3.6" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-57"><i class="fa fa-check"></i><b>19.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting"><i class="fa fa-check"></i><b>19.4</b> Unquoting</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-one-argument"><i class="fa fa-check"></i><b>19.4.1</b> Unquoting one argument</a></li>
<li class="chapter" data-level="19.4.2" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-a-function"><i class="fa fa-check"></i><b>19.4.2</b> Unquoting a function</a></li>
<li class="chapter" data-level="19.4.3" data-path="quasiquotation.html"><a href="quasiquotation.html#unquote-missing"><i class="fa fa-check"></i><b>19.4.3</b> Unquoting a missing argument</a></li>
<li class="chapter" data-level="19.4.4" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-in-special-forms"><i class="fa fa-check"></i><b>19.4.4</b> Unquoting in special forms</a></li>
<li class="chapter" data-level="19.4.5" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-many-arguments"><i class="fa fa-check"></i><b>19.4.5</b> Unquoting many arguments</a></li>
<li class="chapter" data-level="19.4.6" data-path="quasiquotation.html"><a href="quasiquotation.html#the-polite-fiction-of"><i class="fa fa-check"></i><b>19.4.6</b> The polite fiction of <code>!!</code></a></li>
<li class="chapter" data-level="19.4.7" data-path="quasiquotation.html"><a href="quasiquotation.html#non-standard-ast"><i class="fa fa-check"></i><b>19.4.7</b> Non-standard ASTs</a></li>
<li class="chapter" data-level="19.4.8" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-58"><i class="fa fa-check"></i><b>19.4.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="quasiquotation.html"><a href="quasiquotation.html#base-nonquote"><i class="fa fa-check"></i><b>19.5</b> Non-quoting</a></li>
<li class="chapter" data-level="19.6" data-path="quasiquotation.html"><a href="quasiquotation.html#tidy-dots"><i class="fa fa-check"></i><b>19.6</b> <code>...</code> (dot-dot-dot)</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="quasiquotation.html"><a href="quasiquotation.html#examples"><i class="fa fa-check"></i><b>19.6.1</b> Examples</a></li>
<li class="chapter" data-level="19.6.2" data-path="quasiquotation.html"><a href="quasiquotation.html#exec"><i class="fa fa-check"></i><b>19.6.2</b> <code>exec()</code></a></li>
<li class="chapter" data-level="19.6.3" data-path="quasiquotation.html"><a href="quasiquotation.html#dots_list"><i class="fa fa-check"></i><b>19.6.3</b> <code>dots_list()</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="quasiquotation.html"><a href="quasiquotation.html#do-call"><i class="fa fa-check"></i><b>19.6.4</b> With base R</a></li>
<li class="chapter" data-level="19.6.5" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-59"><i class="fa fa-check"></i><b>19.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="quasiquotation.html"><a href="quasiquotation.html#expr-case-studies"><i class="fa fa-check"></i><b>19.7</b> Case studies</a>
<ul>
<li class="chapter" data-level="19.7.1" data-path="quasiquotation.html"><a href="quasiquotation.html#lobstrast"><i class="fa fa-check"></i><b>19.7.1</b> <code>lobstr::ast()</code></a></li>
<li class="chapter" data-level="19.7.2" data-path="quasiquotation.html"><a href="quasiquotation.html#map-reduce-to-generate-code"><i class="fa fa-check"></i><b>19.7.2</b> Map-reduce to generate code</a></li>
<li class="chapter" data-level="19.7.3" data-path="quasiquotation.html"><a href="quasiquotation.html#slicing-an-array"><i class="fa fa-check"></i><b>19.7.3</b> Slicing an array</a></li>
<li class="chapter" data-level="19.7.4" data-path="quasiquotation.html"><a href="quasiquotation.html#new-function"><i class="fa fa-check"></i><b>19.7.4</b> Creating functions</a></li>
<li class="chapter" data-level="19.7.5" data-path="quasiquotation.html"><a href="quasiquotation.html#exercises-60"><i class="fa fa-check"></i><b>19.7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="quasiquotation.html"><a href="quasiquotation.html#history"><i class="fa fa-check"></i><b>19.8</b> History</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>20</b> Evaluation</a>
<ul>
<li class="chapter" data-level="20.1" data-path="evaluation.html"><a href="evaluation.html#introduction-19"><i class="fa fa-check"></i><b>20.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#outline-18"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="evaluation.html"><a href="evaluation.html#prerequisites-13"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="evaluation.html"><a href="evaluation.html#eval"><i class="fa fa-check"></i><b>20.2</b> Evaluation basics</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="evaluation.html"><a href="evaluation.html#application-local"><i class="fa fa-check"></i><b>20.2.1</b> Application: <code>local()</code></a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluation.html"><a href="evaluation.html#application-source"><i class="fa fa-check"></i><b>20.2.2</b> Application: <code>source()</code></a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluation.html"><a href="evaluation.html#gotcha-function"><i class="fa fa-check"></i><b>20.2.3</b> Gotcha: <code>function()</code></a></li>
<li class="chapter" data-level="20.2.4" data-path="evaluation.html"><a href="evaluation.html#exercises-61"><i class="fa fa-check"></i><b>20.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluation.html"><a href="evaluation.html#quosures"><i class="fa fa-check"></i><b>20.3</b> Quosures</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="evaluation.html"><a href="evaluation.html#creating"><i class="fa fa-check"></i><b>20.3.1</b> Creating</a></li>
<li class="chapter" data-level="20.3.2" data-path="evaluation.html"><a href="evaluation.html#evaluating"><i class="fa fa-check"></i><b>20.3.2</b> Evaluating</a></li>
<li class="chapter" data-level="20.3.3" data-path="evaluation.html"><a href="evaluation.html#quosure-dots"><i class="fa fa-check"></i><b>20.3.3</b> Dots</a></li>
<li class="chapter" data-level="20.3.4" data-path="evaluation.html"><a href="evaluation.html#quosure-impl"><i class="fa fa-check"></i><b>20.3.4</b> Under the hood</a></li>
<li class="chapter" data-level="20.3.5" data-path="evaluation.html"><a href="evaluation.html#nested-quosures"><i class="fa fa-check"></i><b>20.3.5</b> Nested quosures</a></li>
<li class="chapter" data-level="20.3.6" data-path="evaluation.html"><a href="evaluation.html#exercises-62"><i class="fa fa-check"></i><b>20.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluation.html"><a href="evaluation.html#data-masks"><i class="fa fa-check"></i><b>20.4</b> Data masks</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="evaluation.html"><a href="evaluation.html#basics-3"><i class="fa fa-check"></i><b>20.4.1</b> Basics</a></li>
<li class="chapter" data-level="20.4.2" data-path="evaluation.html"><a href="evaluation.html#pronouns"><i class="fa fa-check"></i><b>20.4.2</b> Pronouns</a></li>
<li class="chapter" data-level="20.4.3" data-path="evaluation.html"><a href="evaluation.html#subset"><i class="fa fa-check"></i><b>20.4.3</b> Application: <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.4" data-path="evaluation.html"><a href="evaluation.html#application-transform"><i class="fa fa-check"></i><b>20.4.4</b> Application: transform</a></li>
<li class="chapter" data-level="20.4.5" data-path="evaluation.html"><a href="evaluation.html#select"><i class="fa fa-check"></i><b>20.4.5</b> Application: <code>select()</code></a></li>
<li class="chapter" data-level="20.4.6" data-path="evaluation.html"><a href="evaluation.html#exercises-63"><i class="fa fa-check"></i><b>20.4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation"><i class="fa fa-check"></i><b>20.5</b> Using tidy evaluation</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="evaluation.html"><a href="evaluation.html#quoting-and-unquoting"><i class="fa fa-check"></i><b>20.5.1</b> Quoting and unquoting</a></li>
<li class="chapter" data-level="20.5.2" data-path="evaluation.html"><a href="evaluation.html#handling-ambiguity"><i class="fa fa-check"></i><b>20.5.2</b> Handling ambiguity</a></li>
<li class="chapter" data-level="20.5.3" data-path="evaluation.html"><a href="evaluation.html#quoting-and-ambiguity"><i class="fa fa-check"></i><b>20.5.3</b> Quoting and ambiguity</a></li>
<li class="chapter" data-level="20.5.4" data-path="evaluation.html"><a href="evaluation.html#exercises-64"><i class="fa fa-check"></i><b>20.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="evaluation.html"><a href="evaluation.html#base-evaluation"><i class="fa fa-check"></i><b>20.6</b> Base evaluation</a>
<ul>
<li class="chapter" data-level="20.6.1" data-path="evaluation.html"><a href="evaluation.html#substitute"><i class="fa fa-check"></i><b>20.6.1</b> <code>substitute()</code></a></li>
<li class="chapter" data-level="20.6.2" data-path="evaluation.html"><a href="evaluation.html#match.call"><i class="fa fa-check"></i><b>20.6.2</b> <code>match.call()</code></a></li>
<li class="chapter" data-level="20.6.3" data-path="evaluation.html"><a href="evaluation.html#exercises-65"><i class="fa fa-check"></i><b>20.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="translation.html"><a href="translation.html"><i class="fa fa-check"></i><b>21</b> Translating R code</a>
<ul>
<li class="chapter" data-level="21.1" data-path="translation.html"><a href="translation.html#introduction-20"><i class="fa fa-check"></i><b>21.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#outline-19"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="translation.html"><a href="translation.html#prerequisites-14"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="translation.html"><a href="translation.html#html"><i class="fa fa-check"></i><b>21.2</b> HTML</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="translation.html"><a href="translation.html#goal"><i class="fa fa-check"></i><b>21.2.1</b> Goal</a></li>
<li class="chapter" data-level="21.2.2" data-path="translation.html"><a href="translation.html#escaping"><i class="fa fa-check"></i><b>21.2.2</b> Escaping</a></li>
<li class="chapter" data-level="21.2.3" data-path="translation.html"><a href="translation.html#basic-tag-functions"><i class="fa fa-check"></i><b>21.2.3</b> Basic tag functions</a></li>
<li class="chapter" data-level="21.2.4" data-path="translation.html"><a href="translation.html#tag-functions"><i class="fa fa-check"></i><b>21.2.4</b> Tag functions</a></li>
<li class="chapter" data-level="21.2.5" data-path="translation.html"><a href="translation.html#html-env"><i class="fa fa-check"></i><b>21.2.5</b> Processing all tags</a></li>
<li class="chapter" data-level="21.2.6" data-path="translation.html"><a href="translation.html#exercises-66"><i class="fa fa-check"></i><b>21.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="translation.html"><a href="translation.html#latex"><i class="fa fa-check"></i><b>21.3</b> LaTeX</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="translation.html"><a href="translation.html#latex-mathematics"><i class="fa fa-check"></i><b>21.3.1</b> LaTeX mathematics</a></li>
<li class="chapter" data-level="21.3.2" data-path="translation.html"><a href="translation.html#goal-1"><i class="fa fa-check"></i><b>21.3.2</b> Goal</a></li>
<li class="chapter" data-level="21.3.3" data-path="translation.html"><a href="translation.html#to_math"><i class="fa fa-check"></i><b>21.3.3</b> <code>to_math</code>()</a></li>
<li class="chapter" data-level="21.3.4" data-path="translation.html"><a href="translation.html#known-symbols"><i class="fa fa-check"></i><b>21.3.4</b> Known symbols</a></li>
<li class="chapter" data-level="21.3.5" data-path="translation.html"><a href="translation.html#unknown-symbols"><i class="fa fa-check"></i><b>21.3.5</b> Unknown symbols</a></li>
<li class="chapter" data-level="21.3.6" data-path="translation.html"><a href="translation.html#known-functions"><i class="fa fa-check"></i><b>21.3.6</b> Known functions</a></li>
<li class="chapter" data-level="21.3.7" data-path="translation.html"><a href="translation.html#unknown-functions"><i class="fa fa-check"></i><b>21.3.7</b> Unknown functions</a></li>
<li class="chapter" data-level="21.3.8" data-path="translation.html"><a href="translation.html#exercises-67"><i class="fa fa-check"></i><b>21.3.8</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Techniques</b></span></li>
<li class="chapter" data-level="" data-path="techniques.html"><a href="techniques.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="22" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>22</b> Debugging</a>
<ul>
<li class="chapter" data-level="22.1" data-path="debugging.html"><a href="debugging.html#introduction-21"><i class="fa fa-check"></i><b>22.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="debugging.html"><a href="debugging.html#outline-20"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="debugging.html"><a href="debugging.html#debugging-strategy"><i class="fa fa-check"></i><b>22.2</b> Overall approach</a></li>
<li class="chapter" data-level="22.3" data-path="debugging.html"><a href="debugging.html#traceback"><i class="fa fa-check"></i><b>22.3</b> Locating errors</a>
<ul>
<li class="chapter" data-level="22.3.1" data-path="debugging.html"><a href="debugging.html#debug-lazy"><i class="fa fa-check"></i><b>22.3.1</b> Lazy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="debugging.html"><a href="debugging.html#browser"><i class="fa fa-check"></i><b>22.4</b> Interactive debugger</a>
<ul>
<li class="chapter" data-level="22.4.1" data-path="debugging.html"><a href="debugging.html#browser-commands"><i class="fa fa-check"></i><b>22.4.1</b> <code>browser()</code> commands</a></li>
<li class="chapter" data-level="22.4.2" data-path="debugging.html"><a href="debugging.html#alternatives"><i class="fa fa-check"></i><b>22.4.2</b> Alternatives</a></li>
<li class="chapter" data-level="22.4.3" data-path="debugging.html"><a href="debugging.html#debug-compiled"><i class="fa fa-check"></i><b>22.4.3</b> Compiled code</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="debugging.html"><a href="debugging.html#non-interactive-debugging"><i class="fa fa-check"></i><b>22.5</b> Non-interactive debugging</a>
<ul>
<li class="chapter" data-level="22.5.1" data-path="debugging.html"><a href="debugging.html#dump.frames"><i class="fa fa-check"></i><b>22.5.1</b> <code>dump.frames()</code></a></li>
<li class="chapter" data-level="22.5.2" data-path="debugging.html"><a href="debugging.html#print-debugging"><i class="fa fa-check"></i><b>22.5.2</b> Print debugging</a></li>
<li class="chapter" data-level="22.5.3" data-path="debugging.html"><a href="debugging.html#rmarkdown"><i class="fa fa-check"></i><b>22.5.3</b> RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="22.6" data-path="debugging.html"><a href="debugging.html#non-error-failures"><i class="fa fa-check"></i><b>22.6</b> Non-error failures</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="perf-measure.html"><a href="perf-measure.html"><i class="fa fa-check"></i><b>23</b> Measuring performance</a>
<ul>
<li class="chapter" data-level="23.1" data-path="perf-measure.html"><a href="perf-measure.html#introduction-22"><i class="fa fa-check"></i><b>23.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="perf-measure.html"><a href="perf-measure.html#outline-21"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="perf-measure.html"><a href="perf-measure.html#prerequisites-15"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="perf-measure.html"><a href="perf-measure.html#profiling"><i class="fa fa-check"></i><b>23.2</b> Profiling</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="perf-measure.html"><a href="perf-measure.html#visualising-profiles"><i class="fa fa-check"></i><b>23.2.1</b> Visualising profiles</a></li>
<li class="chapter" data-level="23.2.2" data-path="perf-measure.html"><a href="perf-measure.html#memory-profiling"><i class="fa fa-check"></i><b>23.2.2</b> Memory profiling</a></li>
<li class="chapter" data-level="23.2.3" data-path="perf-measure.html"><a href="perf-measure.html#limitations"><i class="fa fa-check"></i><b>23.2.3</b> Limitations</a></li>
<li class="chapter" data-level="23.2.4" data-path="perf-measure.html"><a href="perf-measure.html#exercises-68"><i class="fa fa-check"></i><b>23.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="perf-measure.html"><a href="perf-measure.html#microbenchmarking"><i class="fa fa-check"></i><b>23.3</b> Microbenchmarking</a>
<ul>
<li class="chapter" data-level="23.3.1" data-path="perf-measure.html"><a href="perf-measure.html#benchmark-results"><i class="fa fa-check"></i><b>23.3.1</b> <code>bench::mark()</code> results</a></li>
<li class="chapter" data-level="23.3.2" data-path="perf-measure.html"><a href="perf-measure.html#interpreting-results"><i class="fa fa-check"></i><b>23.3.2</b> Interpreting results</a></li>
<li class="chapter" data-level="23.3.3" data-path="perf-measure.html"><a href="perf-measure.html#exercises-69"><i class="fa fa-check"></i><b>23.3.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="perf-improve.html"><a href="perf-improve.html"><i class="fa fa-check"></i><b>24</b> Improving performance</a>
<ul>
<li class="chapter" data-level="24.1" data-path="perf-improve.html"><a href="perf-improve.html#introduction-23"><i class="fa fa-check"></i><b>24.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="perf-improve.html"><a href="perf-improve.html#outline-22"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="perf-improve.html"><a href="perf-improve.html#prerequisites-16"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="perf-improve.html"><a href="perf-improve.html#code-organisation"><i class="fa fa-check"></i><b>24.2</b> Code organisation</a></li>
<li class="chapter" data-level="24.3" data-path="perf-improve.html"><a href="perf-improve.html#already-solved"><i class="fa fa-check"></i><b>24.3</b> Checking for existing solutions</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="perf-improve.html"><a href="perf-improve.html#exercises-70"><i class="fa fa-check"></i><b>24.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="perf-improve.html"><a href="perf-improve.html#be-lazy"><i class="fa fa-check"></i><b>24.4</b> Doing as little as possible</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="perf-improve.html"><a href="perf-improve.html#mean"><i class="fa fa-check"></i><b>24.4.1</b> <code>mean()</code></a></li>
<li class="chapter" data-level="24.4.2" data-path="perf-improve.html"><a href="perf-improve.html#as.data.frame"><i class="fa fa-check"></i><b>24.4.2</b> <code>as.data.frame()</code></a></li>
<li class="chapter" data-level="24.4.3" data-path="perf-improve.html"><a href="perf-improve.html#exercises-71"><i class="fa fa-check"></i><b>24.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="perf-improve.html"><a href="perf-improve.html#vectorise"><i class="fa fa-check"></i><b>24.5</b> Vectorise</a>
<ul>
<li class="chapter" data-level="24.5.1" data-path="perf-improve.html"><a href="perf-improve.html#exercises-72"><i class="fa fa-check"></i><b>24.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.6" data-path="perf-improve.html"><a href="perf-improve.html#avoid-copies"><i class="fa fa-check"></i><b>24.6</b> Avoiding copies</a></li>
<li class="chapter" data-level="24.7" data-path="perf-improve.html"><a href="perf-improve.html#t-test"><i class="fa fa-check"></i><b>24.7</b> Case study: t-test</a></li>
<li class="chapter" data-level="24.8" data-path="perf-improve.html"><a href="perf-improve.html#more-techniques"><i class="fa fa-check"></i><b>24.8</b> Other techniques</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>25</b> Rewriting R code in C++</a>
<ul>
<li class="chapter" data-level="25.1" data-path="rcpp.html"><a href="rcpp.html#introduction-24"><i class="fa fa-check"></i><b>25.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#outline-23"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="rcpp.html"><a href="rcpp.html#prerequisites-17"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro"><i class="fa fa-check"></i><b>25.2</b> Getting started with C++</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="rcpp.html"><a href="rcpp.html#no-inputs-scalar-output"><i class="fa fa-check"></i><b>25.2.1</b> No inputs, scalar output</a></li>
<li class="chapter" data-level="25.2.2" data-path="rcpp.html"><a href="rcpp.html#scalar-input-scalar-output"><i class="fa fa-check"></i><b>25.2.2</b> Scalar input, scalar output</a></li>
<li class="chapter" data-level="25.2.3" data-path="rcpp.html"><a href="rcpp.html#vector-input-scalar-output"><i class="fa fa-check"></i><b>25.2.3</b> Vector input, scalar output</a></li>
<li class="chapter" data-level="25.2.4" data-path="rcpp.html"><a href="rcpp.html#vector-input-vector-output"><i class="fa fa-check"></i><b>25.2.4</b> Vector input, vector output</a></li>
<li class="chapter" data-level="25.2.5" data-path="rcpp.html"><a href="rcpp.html#sourceCpp"><i class="fa fa-check"></i><b>25.2.5</b> Using sourceCpp</a></li>
<li class="chapter" data-level="25.2.6" data-path="rcpp.html"><a href="rcpp.html#exercise-started"><i class="fa fa-check"></i><b>25.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-classes"><i class="fa fa-check"></i><b>25.3</b> Other classes</a>
<ul>
<li class="chapter" data-level="25.3.1" data-path="rcpp.html"><a href="rcpp.html#lists-and-data-frames"><i class="fa fa-check"></i><b>25.3.1</b> Lists and data frames</a></li>
<li class="chapter" data-level="25.3.2" data-path="rcpp.html"><a href="rcpp.html#functions-rcpp"><i class="fa fa-check"></i><b>25.3.2</b> Functions</a></li>
<li class="chapter" data-level="25.3.3" data-path="rcpp.html"><a href="rcpp.html#attributes-1"><i class="fa fa-check"></i><b>25.3.3</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-na"><i class="fa fa-check"></i><b>25.4</b> Missing values</a>
<ul>
<li class="chapter" data-level="25.4.1" data-path="rcpp.html"><a href="rcpp.html#scalars-1"><i class="fa fa-check"></i><b>25.4.1</b> Scalars</a></li>
<li class="chapter" data-level="25.4.2" data-path="rcpp.html"><a href="rcpp.html#strings"><i class="fa fa-check"></i><b>25.4.2</b> Strings</a></li>
<li class="chapter" data-level="25.4.3" data-path="rcpp.html"><a href="rcpp.html#boolean"><i class="fa fa-check"></i><b>25.4.3</b> Boolean</a></li>
<li class="chapter" data-level="25.4.4" data-path="rcpp.html"><a href="rcpp.html#vectors-rcpp"><i class="fa fa-check"></i><b>25.4.4</b> Vectors</a></li>
<li class="chapter" data-level="25.4.5" data-path="rcpp.html"><a href="rcpp.html#exercises-73"><i class="fa fa-check"></i><b>25.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rcpp.html"><a href="rcpp.html#stl"><i class="fa fa-check"></i><b>25.5</b> Standard Template Library</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="rcpp.html"><a href="rcpp.html#using-iterators"><i class="fa fa-check"></i><b>25.5.1</b> Using iterators</a></li>
<li class="chapter" data-level="25.5.2" data-path="rcpp.html"><a href="rcpp.html#algorithms"><i class="fa fa-check"></i><b>25.5.2</b> Algorithms</a></li>
<li class="chapter" data-level="25.5.3" data-path="rcpp.html"><a href="rcpp.html#data-structures-rcpp"><i class="fa fa-check"></i><b>25.5.3</b> Data structures</a></li>
<li class="chapter" data-level="25.5.4" data-path="rcpp.html"><a href="rcpp.html#vectors-stl"><i class="fa fa-check"></i><b>25.5.4</b> Vectors</a></li>
<li class="chapter" data-level="25.5.5" data-path="rcpp.html"><a href="rcpp.html#sets"><i class="fa fa-check"></i><b>25.5.5</b> Sets</a></li>
<li class="chapter" data-level="25.5.6" data-path="rcpp.html"><a href="rcpp.html#map-1"><i class="fa fa-check"></i><b>25.5.6</b> Map</a></li>
<li class="chapter" data-level="25.5.7" data-path="rcpp.html"><a href="rcpp.html#exercises-74"><i class="fa fa-check"></i><b>25.5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rcpp.html"><a href="rcpp.html#rcpp-case-studies"><i class="fa fa-check"></i><b>25.6</b> Case studies</a>
<ul>
<li class="chapter" data-level="25.6.1" data-path="rcpp.html"><a href="rcpp.html#gibbs-sampler"><i class="fa fa-check"></i><b>25.6.1</b> Gibbs sampler</a></li>
<li class="chapter" data-level="25.6.2" data-path="rcpp.html"><a href="rcpp.html#r-vectorisation-versus-c-vectorisation"><i class="fa fa-check"></i><b>25.6.2</b> R vectorisation versus C++ vectorisation</a></li>
</ul></li>
<li class="chapter" data-level="25.7" data-path="rcpp.html"><a href="rcpp.html#rcpp-package"><i class="fa fa-check"></i><b>25.7</b> Using Rcpp in a package</a></li>
<li class="chapter" data-level="25.8" data-path="rcpp.html"><a href="rcpp.html#rcpp-more"><i class="fa fa-check"></i><b>25.8</b> Learning more</a></li>
<li class="chapter" data-level="25.9" data-path="rcpp.html"><a href="rcpp.html#acknowledgments"><i class="fa fa-check"></i><b>25.9</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conditions" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Conditions</h1>
<div id="introduction-7" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Introduction</h2>
<p>The <strong>condition</strong> system provides a paired set of tools that allow the author of a function to indicate that something unusual is happening, and the user of that function to deal with it. The function author <strong>signals</strong> conditions with functions like <code>stop()</code> (for errors), <code>warning()</code> (for warnings), and <code>message()</code> (for messages), then the function user can handle them with functions like <code>tryCatch()</code> and <code>withCallingHandlers()</code>. Understanding the condition system is important because you’ll often need to play both roles: signalling conditions from the functions you create, and handle conditions signalled by the functions you call.</p>
<p>R offers a very powerful condition system based on ideas from Common Lisp. Like R’s approach to object-oriented programming, it is rather different to currently popular programming languages so it is easy to misunderstand, and there has been relatively little written about how to use it effectively. Historically, this has meant that few people (myself included) have taken full advantage of its power. The goal of this chapter is to remedy that situation. Here you will learn about the big ideas of R’s condition system, as well as learning a bunch of practical tools that will make your code stronger.</p>
<p>I found two resources particularly useful when writing this chapter. You may also want to read them if you want to learn more about the inspirations and motivations for the system:</p>
<ul>
<li><p><a href="http://homepage.stat.uiowa.edu/~luke/R/exceptions/simpcond.html"><em>A prototype of a condition system for R</em></a> by Robert Gentleman
and Luke Tierney. This describes an early version of R’s condition system.
While the implementation has changed somewhat since this document was
written, it provides a good overview of how the pieces fit together, and
some motivation for its design.</p></li>
<li><p><a href="http://www.gigamonkeys.com/book/beyond-exception-handling-conditions-and-restarts.html"><em>Beyond exception handling: conditions and restarts</em></a>
by Peter Seibel. This describes exception handling in Lisp, which happens
to be very similar to R’s approach. It provides useful motivation and
more sophisticated examples. I have provided an R translation of the
chapter at <a href="http://adv-r.had.co.nz/beyond-exception-handling.html" class="uri">http://adv-r.had.co.nz/beyond-exception-handling.html</a>.</p></li>
</ul>
<p>I also found it helpful to work through the underlying C code that implements these ideas. If you’re interested in understanding how it all works, you might find <a href="https://gist.github.com/hadley/4278d0a6d3a10e42533d59905fbed0ac">my notes</a> to be useful.</p>
<div id="quiz-6" class="section level3 unnumbered">
<h3>Quiz</h3>
<p>Want to skip this chapter? Go for it, if you can answer the questions below. Find the answers at the end of the chapter in Section <a href="conditions.html#conditions-answers">8.7</a>.</p>
<ol style="list-style-type: decimal">
<li><p>What are the three most important types of condition?</p></li>
<li><p>What function do you use to ignore errors in block of code?</p></li>
<li><p>What’s the main difference between <code>tryCatch()</code> and <code>withCallingHandlers()</code>?</p></li>
<li><p>Why might you want to create a custom error object?</p></li>
</ol>
</div>
<div id="outline-6" class="section level3 unnumbered">
<h3>Outline</h3>
<ul>
<li><p>Section <a href="conditions.html#signalling-conditions">8.2</a> introduces the basic tools for
signalling conditions, and discusses when it is appropriate to use each type.</p></li>
<li><p>Section <a href="conditions.html#ignoring-conditions">8.3</a> teaches you about the simplest tools for
handling conditions: functions like <code>try()</code> and <code>supressMessages()</code> that
swallow conditions and prevent them from getting to the top level.</p></li>
<li><p>Section <a href="conditions.html#handling-conditions">8.4</a> introduces the condition <strong>object</strong>, and
the two fundamental tools of condition handling: <code>tryCatch()</code> for error
conditions, and <code>withCallingHandlers()</code> for everything else.</p></li>
<li><p>Section <a href="conditions.html#custom-conditions">8.5</a> shows you how to extend the built-in
condition objects to store useful data that condition handlers can use to
make more informed decisions.</p></li>
<li><p>Section <a href="conditions.html#condition-applications">8.6</a> closes out the chapter with a grab bag
of practical applications based on the low-level tools found in earlier
sections.</p></li>
</ul>
</div>
<div id="prerequisites-2" class="section level3" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Prerequisites</h3>
<p>As well as base R functions, this chapter uses condition signalling and handling functions from <a href="https://rlang.r-lib.org">rlang</a>.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="conditions.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlang)</span></code></pre></div>
</div>
</div>
<div id="signalling-conditions" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Signalling conditions</h2>
<p>
</p>
<p>There are three conditions that you can signal in code: errors, warnings, and messages.</p>
<ul>
<li><p>Errors are the most severe; they indicate that there is no way for a function
to continue and execution must stop.</p></li>
<li><p>Warnings fall somewhat in between errors and message, and typically indicate
that something has gone wrong but the function has been able to at least
partially recover.</p></li>
<li><p>Messages are the mildest; they are way of informing users that some action
has been performed on their behalf.</p></li>
</ul>
<p>There is a final condition that can only be generated interactively: an interrupt, which indicates that the user has interrupted execution by pressing Escape, Ctrl + Break, or Ctrl + C (depending on the platform).</p>
<p>Conditions are usually displayed prominently, in a bold font or coloured red, depending on the R interface. You can tell them apart because errors always start with “Error,” warnings with “Warning” or “Warning message,” and messages with nothing.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="conditions.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">&quot;This is what an error looks like&quot;</span>)</span>
<span id="cb326-2"><a href="conditions.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in eval(expr, envir, enclos): This is what an error looks like</span></span>
<span id="cb326-3"><a href="conditions.html#cb326-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-4"><a href="conditions.html#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="fu">warning</span>(<span class="st">&quot;This is what a warning looks like&quot;</span>)</span>
<span id="cb326-5"><a href="conditions.html#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: This is what a warning looks like</span></span>
<span id="cb326-6"><a href="conditions.html#cb326-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-7"><a href="conditions.html#cb326-7" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;This is what a message looks like&quot;</span>)</span>
<span id="cb326-8"><a href="conditions.html#cb326-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; This is what a message looks like</span></span></code></pre></div>
<p>The following three sections describe errors, warnings, and messages in more detail.</p>
<div id="errors-1" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Errors</h3>
<p>

</p>
<p>In base R, errors are signalled, or <strong>thrown</strong>, by <code>stop()</code>:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="conditions.html#cb327-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">g</span>()</span>
<span id="cb327-2"><a href="conditions.html#cb327-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">h</span>()</span>
<span id="cb327-3"><a href="conditions.html#cb327-3" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">stop</span>(<span class="st">&quot;This is an error!&quot;</span>)</span>
<span id="cb327-4"><a href="conditions.html#cb327-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-5"><a href="conditions.html#cb327-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb327-6"><a href="conditions.html#cb327-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in h(): This is an error!</span></span></code></pre></div>
<p>By default, the error message includes the call, but this is typically not useful (and recapitulates information that you can easily get from <code>traceback()</code>), so I think it’s good practice to use <code>call. = FALSE</code><a href="#fn46" class="footnote-ref" id="fnref46"><sup>46</sup></a>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="conditions.html#cb328-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">stop</span>(<span class="st">&quot;This is an error!&quot;</span>, <span class="at">call. =</span> <span class="cn">FALSE</span>)</span>
<span id="cb328-2"><a href="conditions.html#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb328-3"><a href="conditions.html#cb328-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: This is an error!</span></span></code></pre></div>
<p>The rlang equivalent to <code>stop()</code>, <code>rlang::abort()</code>, does this automatically. We’ll use <code>abort()</code> throughout this chapter, but we won’t get to its most compelling feature, the ability to add additional metadata to the condition object, until we’re near the end of the chapter.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="conditions.html#cb329-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">abort</span>(<span class="st">&quot;This is an error!&quot;</span>)</span>
<span id="cb329-2"><a href="conditions.html#cb329-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>()</span>
<span id="cb329-3"><a href="conditions.html#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: This is an error!</span></span></code></pre></div>
<p>(NB: <code>stop()</code> pastes together multiple inputs, while <code>abort()</code> does not. To create complex error messages with abort, I recommend using <code>glue::glue()</code>. This allows us to use other arguments to <code>abort()</code> for useful features that you’ll learn about in Section <a href="conditions.html#custom-conditions">8.5</a>.)</p>
<p>The best error messages tell you what is wrong and point you in the right direction to fix the problem. Writing good error messages is hard because errors usually occur when the user has a flawed mental model of the function. As a developer, it’s hard to imagine how the user might be thinking incorrectly about your function, and thus it’s hard to write a message that will steer the user in the correct direction. That said, the tidyverse style guide discusses a few general principles that we have found useful: <a href="http://style.tidyverse.org/error-messages.html" class="uri">http://style.tidyverse.org/error-messages.html</a>.</p>
</div>
<div id="warnings" class="section level3" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Warnings</h3>
<p></p>
<p>Warnings, signalled by <code>warning()</code>, are weaker than errors: they signal that something has gone wrong, but the code has been able to recover and continue. Unlike errors, you can have multiple warnings from a single function call:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="conditions.html#cb330-1" aria-hidden="true" tabindex="-1"></a>fw <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb330-2"><a href="conditions.html#cb330-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb330-3"><a href="conditions.html#cb330-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;W1&quot;</span>)</span>
<span id="cb330-4"><a href="conditions.html#cb330-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;2</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb330-5"><a href="conditions.html#cb330-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;W2&quot;</span>)</span>
<span id="cb330-6"><a href="conditions.html#cb330-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;3</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb330-7"><a href="conditions.html#cb330-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;W3&quot;</span>)</span>
<span id="cb330-8"><a href="conditions.html#cb330-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>By default, warnings are cached and printed only when control returns to the top level:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="conditions.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fw</span>()</span>
<span id="cb331-2"><a href="conditions.html#cb331-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb331-3"><a href="conditions.html#cb331-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2</span></span>
<span id="cb331-4"><a href="conditions.html#cb331-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span>
<span id="cb331-5"><a href="conditions.html#cb331-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning messages:</span></span>
<span id="cb331-6"><a href="conditions.html#cb331-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: In f() : W1</span></span>
<span id="cb331-7"><a href="conditions.html#cb331-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: In f() : W2</span></span>
<span id="cb331-8"><a href="conditions.html#cb331-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3: In f() : W3</span></span></code></pre></div>
<p>
You can control this behaviour with the <code>warn</code> option:</p>
<ul>
<li><p>To make warnings appear immediately, set <code>options(warn = 1)</code>.</p></li>
<li><p>To turn warnings into errors, set <code>options(warn = 2)</code>. This is usually
the easiest way to debug a warning, as once it’s an error you can
use tools like <code>traceback()</code> to find the source.</p></li>
<li><p>Restore the default behaviour with <code>options(warn = 0)</code>.</p></li>
</ul>
<p>Like <code>stop()</code>, <code>warning()</code> also has a call argument. It is slightly more useful (since warnings are often more distant from their source), but I still generally suppress it with <code>call. = FALSE</code>. Like <code>rlang::abort()</code>, the rlang equivalent of <code>warning()</code>, <code>rlang::warn()</code>, also suppresses the <code>call.</code> by default.</p>
<p>Warnings occupy a somewhat challenging place between messages (“you should know about this”) and errors (“you must fix this!”), and it’s hard to give precise advice on when to use them. Generally, be restrained, as warnings are easy to miss if there’s a lot of other output, and you don’t want your function to recover too easily from clearly invalid input. In my opinion, base R tends to overuse warnings, and many warnings in base R would be better off as errors. For example, I think these warnings would be more helpful as errors:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="conditions.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(<span class="dv">1</span>)</span>
<span id="cb332-2"><a href="conditions.html#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in formals(fun): argument is not a function</span></span>
<span id="cb332-3"><a href="conditions.html#cb332-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb332-4"><a href="conditions.html#cb332-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-5"><a href="conditions.html#cb332-5" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&quot;this-file-doesn&#39;t-exist&quot;</span>)</span>
<span id="cb332-6"><a href="conditions.html#cb332-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in file.remove(&quot;this-file-doesn&#39;t-exist&quot;): cannot remove file &#39;this-</span></span>
<span id="cb332-7"><a href="conditions.html#cb332-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; file-doesn&#39;t-exist&#39;, reason &#39;No such file or directory&#39;</span></span>
<span id="cb332-8"><a href="conditions.html#cb332-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb332-9"><a href="conditions.html#cb332-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-10"><a href="conditions.html#cb332-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">k =</span> <span class="fl">1.5</span>)</span>
<span id="cb332-11"><a href="conditions.html#cb332-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning in lag.default(1:3, k = 1.5): &#39;k&#39; is not an integer</span></span>
<span id="cb332-12"><a href="conditions.html#cb332-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb332-13"><a href="conditions.html#cb332-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;tsp&quot;)</span></span>
<span id="cb332-14"><a href="conditions.html#cb332-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -1  1  1</span></span>
<span id="cb332-15"><a href="conditions.html#cb332-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb332-16"><a href="conditions.html#cb332-16" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;18&quot;</span>, <span class="st">&quot;30&quot;</span>, <span class="st">&quot;50+&quot;</span>, <span class="st">&quot;345,678&quot;</span>))</span>
<span id="cb332-17"><a href="conditions.html#cb332-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: NAs introduced by coercion</span></span>
<span id="cb332-18"><a href="conditions.html#cb332-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18 30 NA NA</span></span></code></pre></div>
<p>There are only a couple of cases where using a warning is clearly appropriate:</p>
<ul>
<li><p>When you <strong>deprecate</strong> a function you want to allow older code to continue
to work (so ignoring the warning is OK) but you want to encourage the user
to switch to a new function.</p></li>
<li><p>When you are reasonably certain you can recover from a problem:
If you were 100% certain that you could fix the problem, you wouldn’t need
any message; if you were more uncertain that you could correctly fix the
issue, you’d throw an error.</p></li>
</ul>
<p>Otherwise use warnings with restraint, and carefully consider if an error would be more appropriate.</p>
</div>
<div id="messages" class="section level3" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Messages</h3>
<p>

</p>
<p>Messages, signalled by <code>message()</code>, are informational; use them to tell the user that you’ve done something on their behalf. Good messages are a balancing act: you want to provide just enough information so the user knows what’s going on, but not so much that they’re overwhelmed.</p>
<p><code>message()</code>s are displayed immediately and do not have a <code>call.</code> argument:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="conditions.html#cb333-1" aria-hidden="true" tabindex="-1"></a>fm <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb333-2"><a href="conditions.html#cb333-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb333-3"><a href="conditions.html#cb333-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;M1&quot;</span>)</span>
<span id="cb333-4"><a href="conditions.html#cb333-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;2</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb333-5"><a href="conditions.html#cb333-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;M2&quot;</span>)</span>
<span id="cb333-6"><a href="conditions.html#cb333-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;3</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb333-7"><a href="conditions.html#cb333-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;M3&quot;</span>)</span>
<span id="cb333-8"><a href="conditions.html#cb333-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb333-9"><a href="conditions.html#cb333-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-10"><a href="conditions.html#cb333-10" aria-hidden="true" tabindex="-1"></a><span class="fu">fm</span>()</span>
<span id="cb333-11"><a href="conditions.html#cb333-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb333-12"><a href="conditions.html#cb333-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; M1</span></span>
<span id="cb333-13"><a href="conditions.html#cb333-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2</span></span>
<span id="cb333-14"><a href="conditions.html#cb333-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; M2</span></span>
<span id="cb333-15"><a href="conditions.html#cb333-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span>
<span id="cb333-16"><a href="conditions.html#cb333-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; M3</span></span></code></pre></div>
<p>Good places to use a message are:</p>
<ul>
<li><p>When a default argument requires some non-trivial amount of computation
and you want to tell the user what value was used. For example, ggplot2
reports the number of bins used if you don’t supply a <code>binwidth</code>.</p></li>
<li><p>In functions that are called primarily for their side-effects which would
otherwise be silent. For example, when writing files to disk, calling a web
API, or writing to a database, it’s useful to provide regular status messages
telling the user what’s happening.</p></li>
<li><p>When you’re about to start a long running process with no
intermediate output. A progress bar (e.g. with
<a href="https://github.com/r-lib/progress">progress</a>) is better, but a message
is a good place to start.</p></li>
<li><p>When writing a package, you sometimes want to display a message when
your package is loaded (i.e. in <code>.onAttach()</code>); here you must use
<code>packageStartupMessage()</code>.</p></li>
</ul>
<p>Generally any function that produces a message should have some way to suppress it, like a <code>quiet = TRUE</code> argument. It is possible to suppress all messages with <code>suppressMessages()</code>, as you’ll learn shortly, but it is nice to also give finer grained control.</p>
<p>It’s important to compare <code>message()</code> to the closely related <code>cat()</code>. In terms of usage and result, they appear quite similar<a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a>:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="conditions.html#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Hi!</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb334-2"><a href="conditions.html#cb334-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hi!</span></span>
<span id="cb334-3"><a href="conditions.html#cb334-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-4"><a href="conditions.html#cb334-4" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Hi!&quot;</span>)</span>
<span id="cb334-5"><a href="conditions.html#cb334-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hi!</span></span></code></pre></div>
<p>However, the <em>purposes</em> of <code>cat()</code> and <code>message()</code> are different. Use <code>cat()</code> when the primary role of the function is to print to the console, like <code>print()</code> or <code>str()</code> methods. Use <code>message()</code> as a side-channel to print to the console when the primary purpose of the function is something else. In other words, <code>cat()</code> is for when the user <em>asks</em> for something to be printed and <code>message()</code> is for when the developer <em>elects</em> to print something.</p>
</div>
<div id="exercises-24" class="section level3" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Write a wrapper around <code>file.remove()</code> that throws an error if the file
to be deleted does not exist.</p></li>
<li><p>What does the <code>appendLF</code> argument to <code>message()</code> do? How is it related to
<code>cat()</code>?</p></li>
</ol>
</div>
</div>
<div id="ignoring-conditions" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Ignoring conditions</h2>
<p>


</p>
<p>The simplest way of handling conditions in R is to simply ignore them:</p>
<ul>
<li>Ignore errors with <code>try()</code>.</li>
<li>Ignore warnings with <code>suppressWarnings()</code>.</li>
<li>Ignore messages with <code>suppressMessages()</code>.</li>
</ul>
<p>These functions are heavy handed as you can’t use them to suppress a single type of condition that you know about, while allowing everything else to pass through. We’ll come back to that challenge later in the chapter.</p>
<p><code>try()</code> allows execution to continue even after an error has occurred. Normally if you run a function that throws an error, it terminates immediately and doesn’t return a value:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="conditions.html#cb335-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb335-2"><a href="conditions.html#cb335-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(x)</span>
<span id="cb335-3"><a href="conditions.html#cb335-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span></span>
<span id="cb335-4"><a href="conditions.html#cb335-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb335-5"><a href="conditions.html#cb335-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f1</span>(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb335-6"><a href="conditions.html#cb335-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in log(x): non-numeric argument to mathematical function</span></span></code></pre></div>
<p>However, if you wrap the statement that creates the error in <code>try()</code>, the error message will be displayed<a href="#fn48" class="footnote-ref" id="fnref48"><sup>48</sup></a> but execution will continue:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="conditions.html#cb336-1" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb336-2"><a href="conditions.html#cb336-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">try</span>(<span class="fu">log</span>(x))</span>
<span id="cb336-3"><a href="conditions.html#cb336-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span></span>
<span id="cb336-4"><a href="conditions.html#cb336-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb336-5"><a href="conditions.html#cb336-5" aria-hidden="true" tabindex="-1"></a><span class="fu">f2</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb336-6"><a href="conditions.html#cb336-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in log(x) : non-numeric argument to mathematical function</span></span>
<span id="cb336-7"><a href="conditions.html#cb336-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<p>It is possible, but not recommended, to save the result of <code>try()</code> and perform different actions based on whether or not the code succeeded or failed<a href="#fn49" class="footnote-ref" id="fnref49"><sup>49</sup></a>. Instead, it is better to use <code>tryCatch()</code> or a higher-level helper; you’ll learn about those shortly.</p>
<p>A simple, but useful, pattern is to do assignment inside the call: this lets you define a default value to be used if the code does not succeed. This works because the argument is evaluated in the calling environment, not inside the function. (See Section <a href="functions.html#promises">6.5.1</a> for more details.)</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="conditions.html#cb337-1" aria-hidden="true" tabindex="-1"></a>default <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb337-2"><a href="conditions.html#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(default <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;possibly-bad-input.csv&quot;</span>), <span class="at">silent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><code>suppressWarnings()</code> and <code>suppressMessages()</code> suppress all warnings and messages. Unlike errors, messages and warnings don’t terminate execution, so there may be multiple warnings and messages signalled in a single block.</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="conditions.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>({</span>
<span id="cb338-2"><a href="conditions.html#cb338-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;Uhoh!&quot;</span>)</span>
<span id="cb338-3"><a href="conditions.html#cb338-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;Another warning&quot;</span>)</span>
<span id="cb338-4"><a href="conditions.html#cb338-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb338-5"><a href="conditions.html#cb338-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb338-6"><a href="conditions.html#cb338-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb338-7"><a href="conditions.html#cb338-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-8"><a href="conditions.html#cb338-8" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>({</span>
<span id="cb338-9"><a href="conditions.html#cb338-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Hello there&quot;</span>)</span>
<span id="cb338-10"><a href="conditions.html#cb338-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span></span>
<span id="cb338-11"><a href="conditions.html#cb338-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb338-12"><a href="conditions.html#cb338-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb338-13"><a href="conditions.html#cb338-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-14"><a href="conditions.html#cb338-14" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>({</span>
<span id="cb338-15"><a href="conditions.html#cb338-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;You can still see me&quot;</span>)</span>
<span id="cb338-16"><a href="conditions.html#cb338-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span></span>
<span id="cb338-17"><a href="conditions.html#cb338-17" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb338-18"><a href="conditions.html#cb338-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; You can still see me</span></span>
<span id="cb338-19"><a href="conditions.html#cb338-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
</div>
<div id="handling-conditions" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Handling conditions</h2>
<p>


</p>
<p>Every condition has default behaviour: errors stop execution and return to the top level, warnings are captured and displayed in aggregate, and messages are immediately displayed. Condition <strong>handlers</strong> allow us to temporarily override or supplement the default behaviour.</p>
<p>Two functions, <code>tryCatch()</code> and <code>withCallingHandlers()</code>, allow us to register handlers, functions that take the signalled condition as their single argument. The registration functions have the same basic form:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="conditions.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb339-2"><a href="conditions.html#cb339-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb339-3"><a href="conditions.html#cb339-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># code to run when error is thrown</span></span>
<span id="cb339-4"><a href="conditions.html#cb339-4" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb339-5"><a href="conditions.html#cb339-5" aria-hidden="true" tabindex="-1"></a>  code_to_run_while_handlers_are_active</span>
<span id="cb339-6"><a href="conditions.html#cb339-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb339-7"><a href="conditions.html#cb339-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-8"><a href="conditions.html#cb339-8" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb339-9"><a href="conditions.html#cb339-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">warning =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb339-10"><a href="conditions.html#cb339-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># code to run when warning is signalled</span></span>
<span id="cb339-11"><a href="conditions.html#cb339-11" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb339-12"><a href="conditions.html#cb339-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb339-13"><a href="conditions.html#cb339-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># code to run when message is signalled</span></span>
<span id="cb339-14"><a href="conditions.html#cb339-14" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb339-15"><a href="conditions.html#cb339-15" aria-hidden="true" tabindex="-1"></a>  code_to_run_while_handlers_are_active</span>
<span id="cb339-16"><a href="conditions.html#cb339-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>They differ in the type of handlers that they create:</p>
<ul>
<li><p><code>tryCatch()</code> defines <strong>exiting</strong> handlers; after the condition is handled,
control returns to the context where <code>tryCatch()</code> was called. This makes
<code>tryCatch()</code> most suitable for working with errors and interrupts, as these
have to exit anyway.</p></li>
<li><p><code>withCallingHandlers()</code> defines <strong>calling</strong> handlers; after the condition
is captured control returns to the context where the condition was signalled.
This makes it most suitable for working with non-error conditions.</p></li>
</ul>
<p>But before we can learn about and use these handlers, we need to talk a little bit about condition <strong>objects</strong>. These are created implicitly whenever you signal a condition, but become explicit inside the handler.</p>
<div id="condition-objects" class="section level3" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Condition objects</h3>
<p>
</p>
<p>So far we’ve just signalled conditions, and not looked at the objects that are created behind the scenes. The easiest way to see a condition object is to catch one from a signalled condition. That’s the job of <code>rlang::catch_cnd()</code>:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="conditions.html#cb340-1" aria-hidden="true" tabindex="-1"></a>cnd <span class="ot">&lt;-</span> <span class="fu">catch_cnd</span>(<span class="fu">stop</span>(<span class="st">&quot;An error&quot;</span>))</span>
<span id="cb340-2"><a href="conditions.html#cb340-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cnd)</span>
<span id="cb340-3"><a href="conditions.html#cb340-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb340-4"><a href="conditions.html#cb340-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ message: chr &quot;An error&quot;</span></span>
<span id="cb340-5"><a href="conditions.html#cb340-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ call   : language force(expr)</span></span>
<span id="cb340-6"><a href="conditions.html#cb340-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  - attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></span></code></pre></div>
<p>Built-in conditions are lists with two elements:</p>
<ul>
<li><p><code>message</code>, a length-1 character vector containing the text to display to a user.
To extract the message, use <code>conditionMessage(cnd)</code>.</p></li>
<li><p><code>call</code>, the call which triggered the condition. As described above, we don’t
use the call, so it will often be <code>NULL</code>. To extract it, use
<code>conditionCall(cnd)</code>.</p></li>
</ul>
<p>Custom conditions may contain other components, which we’ll discuss in Section <a href="conditions.html#custom-conditions">8.5</a>.</p>
<p>Conditions also have a <code>class</code> attribute, which makes them S3 objects. We won’t discuss S3 until Chapter <a href="s3.html#s3">13</a>, but fortunately, even if you don’t know about S3, condition objects are quite simple. The most important thing to know is that the <code>class</code> attribute is a character vector, and it determines which handlers will match the condition.</p>
</div>
<div id="exiting-handlers" class="section level3" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Exiting handlers</h3>
<p></p>
<p><code>tryCatch()</code> registers exiting handlers, and is typically used to handle error conditions. It allows you to override the default error behaviour. For example, the following code will return <code>NA</code> instead of throwing an error:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="conditions.html#cb341-1" aria-hidden="true" tabindex="-1"></a>f3 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb341-2"><a href="conditions.html#cb341-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb341-3"><a href="conditions.html#cb341-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="cn">NA</span>,</span>
<span id="cb341-4"><a href="conditions.html#cb341-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">log</span>(x)</span>
<span id="cb341-5"><a href="conditions.html#cb341-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb341-6"><a href="conditions.html#cb341-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb341-7"><a href="conditions.html#cb341-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-8"><a href="conditions.html#cb341-8" aria-hidden="true" tabindex="-1"></a><span class="fu">f3</span>(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb341-9"><a href="conditions.html#cb341-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>If no conditions are signalled, or the class of the signalled condition does not match the handler name, the code executes normally:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="conditions.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb342-2"><a href="conditions.html#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="dv">10</span>,</span>
<span id="cb342-3"><a href="conditions.html#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb342-4"><a href="conditions.html#cb342-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb342-5"><a href="conditions.html#cb342-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb342-6"><a href="conditions.html#cb342-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-7"><a href="conditions.html#cb342-7" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb342-8"><a href="conditions.html#cb342-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="dv">10</span>,</span>
<span id="cb342-9"><a href="conditions.html#cb342-9" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb342-10"><a href="conditions.html#cb342-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Hi!&quot;</span>)</span>
<span id="cb342-11"><a href="conditions.html#cb342-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb342-12"><a href="conditions.html#cb342-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb342-13"><a href="conditions.html#cb342-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb342-14"><a href="conditions.html#cb342-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hi!</span></span>
<span id="cb342-15"><a href="conditions.html#cb342-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>The handlers set up by <code>tryCatch()</code> are called <strong>exiting</strong> handlers because after the condition is signalled, control passes to the handler and never returns to the original code, effectively meaning that the code exits:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="conditions.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb343-2"><a href="conditions.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;There&quot;</span>,</span>
<span id="cb343-3"><a href="conditions.html#cb343-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb343-4"><a href="conditions.html#cb343-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Here&quot;</span>)</span>
<span id="cb343-5"><a href="conditions.html#cb343-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;This code is never run!&quot;</span>)</span>
<span id="cb343-6"><a href="conditions.html#cb343-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb343-7"><a href="conditions.html#cb343-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb343-8"><a href="conditions.html#cb343-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;There&quot;</span></span></code></pre></div>
<p>The protected code is evaluated in the environment of <code>tryCatch()</code>, but the handler code is not, because the handlers are functions. This is important to remember if you’re trying to modify objects in the parent environment.</p>
<p>The handler functions are called with a single argument, the condition object. I call this argument <code>cnd</code>, by convention. This value is only moderately useful for the base conditions because they contain relatively little data. It’s more useful when you make your own custom conditions, as you’ll see shortly.</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="conditions.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb344-2"><a href="conditions.html#cb344-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb344-3"><a href="conditions.html#cb344-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;--&quot;</span>, <span class="fu">conditionMessage</span>(cnd), <span class="st">&quot;--&quot;</span>)</span>
<span id="cb344-4"><a href="conditions.html#cb344-4" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb344-5"><a href="conditions.html#cb344-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;This is an error&quot;</span>)</span>
<span id="cb344-6"><a href="conditions.html#cb344-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb344-7"><a href="conditions.html#cb344-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;--This is an error--&quot;</span></span></code></pre></div>
<p><code>tryCatch()</code> has one other argument: <code>finally</code>. It specifies a block of code (not a function) to run regardless of whether the initial expression succeeds or fails. This can be useful for clean up, like deleting files, or closing connections. This is functionally equivalent to using <code>on.exit()</code> (and indeed that’s how it’s implemented) but it can wrap smaller chunks of code than an entire function.
</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="conditions.html#cb345-1" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb345-2"><a href="conditions.html#cb345-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb345-3"><a href="conditions.html#cb345-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb345-4"><a href="conditions.html#cb345-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(<span class="st">&quot;Hi!&quot;</span>, path)</span>
<span id="cb345-5"><a href="conditions.html#cb345-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ...</span></span>
<span id="cb345-6"><a href="conditions.html#cb345-6" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb345-7"><a href="conditions.html#cb345-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">finally =</span> {</span>
<span id="cb345-8"><a href="conditions.html#cb345-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># always run</span></span>
<span id="cb345-9"><a href="conditions.html#cb345-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unlink</span>(path)</span>
<span id="cb345-10"><a href="conditions.html#cb345-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb345-11"><a href="conditions.html#cb345-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="calling-handlers" class="section level3" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Calling handlers</h3>
<p>
</p>
<p>The handlers set up by <code>tryCatch()</code> are called exiting handlers, because they cause code to exit once the condition has been caught. By contrast, <code>withCallingHandlers()</code> sets up <strong>calling</strong> handlers: code execution continues normally once the handler returns. This tends to make <code>withCallingHandlers()</code> a more natural pairing with the non-error conditions. Exiting and calling handlers use “handler” in slighty different senses:</p>
<ul>
<li><p>An exiting handler handles a signal like you handle a problem; it makes the
problem go away.</p></li>
<li><p>A calling handler handles a signal like you handle a car; the car still
exists.</p></li>
</ul>
<p>Compare the results of <code>tryCatch()</code> and <code>withCallingHandlers()</code> in the example below. The messages are not printed in the first case, because the code is terminated once the exiting handler completes. They are printed in the second case, because a calling handler does not exit.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="conditions.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb346-2"><a href="conditions.html#cb346-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Caught a message!</span><span class="sc">\n</span><span class="st">&quot;</span>), </span>
<span id="cb346-3"><a href="conditions.html#cb346-3" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb346-4"><a href="conditions.html#cb346-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Someone there?&quot;</span>)</span>
<span id="cb346-5"><a href="conditions.html#cb346-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Why, yes!&quot;</span>)</span>
<span id="cb346-6"><a href="conditions.html#cb346-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb346-7"><a href="conditions.html#cb346-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb346-8"><a href="conditions.html#cb346-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caught a message!</span></span>
<span id="cb346-9"><a href="conditions.html#cb346-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-10"><a href="conditions.html#cb346-10" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb346-11"><a href="conditions.html#cb346-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Caught a message!</span><span class="sc">\n</span><span class="st">&quot;</span>), </span>
<span id="cb346-12"><a href="conditions.html#cb346-12" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb346-13"><a href="conditions.html#cb346-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Someone there?&quot;</span>)</span>
<span id="cb346-14"><a href="conditions.html#cb346-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Why, yes!&quot;</span>)</span>
<span id="cb346-15"><a href="conditions.html#cb346-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb346-16"><a href="conditions.html#cb346-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb346-17"><a href="conditions.html#cb346-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caught a message!</span></span>
<span id="cb346-18"><a href="conditions.html#cb346-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Someone there?</span></span>
<span id="cb346-19"><a href="conditions.html#cb346-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caught a message!</span></span>
<span id="cb346-20"><a href="conditions.html#cb346-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Why, yes!</span></span></code></pre></div>
<p>Handlers are applied in order, so you don’t need to worry about getting caught in an infinite loop. In the following example, the <code>message()</code> signalled by the handler doesn’t also get caught:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="conditions.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb347-2"><a href="conditions.html#cb347-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">message</span>(<span class="st">&quot;Second message&quot;</span>),</span>
<span id="cb347-3"><a href="conditions.html#cb347-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;First message&quot;</span>)</span>
<span id="cb347-4"><a href="conditions.html#cb347-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb347-5"><a href="conditions.html#cb347-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Second message</span></span>
<span id="cb347-6"><a href="conditions.html#cb347-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; First message</span></span></code></pre></div>
<p>(But beware if you have multiple handlers, and some handlers signal conditions that could be captured by another handler: you’ll need to think through the order carefully.)</p>
<p>The return value of a calling handler is ignored because the code continues to execute after the handler completes; where would the return value go? That means that calling handlers are only useful for their side-effects.</p>
<p>
</p>
<p>One important side-effect unique to calling handlers is the ability to <strong>muffle</strong> the signal. By default, a condition will continue to propagate to parent handlers, all the way up to the default handler (or an exiting handler, if provided):</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="conditions.html#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bubbles all the way up to default handler which generates the message</span></span>
<span id="cb348-2"><a href="conditions.html#cb348-2" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb348-3"><a href="conditions.html#cb348-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 2</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb348-4"><a href="conditions.html#cb348-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb348-5"><a href="conditions.html#cb348-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 1</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb348-6"><a href="conditions.html#cb348-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb348-7"><a href="conditions.html#cb348-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb348-8"><a href="conditions.html#cb348-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb348-9"><a href="conditions.html#cb348-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 1</span></span>
<span id="cb348-10"><a href="conditions.html#cb348-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 2</span></span>
<span id="cb348-11"><a href="conditions.html#cb348-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hello</span></span>
<span id="cb348-12"><a href="conditions.html#cb348-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-13"><a href="conditions.html#cb348-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Bubbles up to tryCatch</span></span>
<span id="cb348-14"><a href="conditions.html#cb348-14" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb348-15"><a href="conditions.html#cb348-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 2</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb348-16"><a href="conditions.html#cb348-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb348-17"><a href="conditions.html#cb348-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 1</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb348-18"><a href="conditions.html#cb348-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb348-19"><a href="conditions.html#cb348-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb348-20"><a href="conditions.html#cb348-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb348-21"><a href="conditions.html#cb348-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 1</span></span>
<span id="cb348-22"><a href="conditions.html#cb348-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 2</span></span></code></pre></div>
<p>If you want to prevent the condition “bubbling up” but still run the rest of the code in the block, you need to explicitly muffle it with <code>rlang::cnd_muffle()</code>:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="conditions.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Muffles the default handler which prints the messages</span></span>
<span id="cb349-2"><a href="conditions.html#cb349-2" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb349-3"><a href="conditions.html#cb349-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb349-4"><a href="conditions.html#cb349-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">&quot;Level 2</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb349-5"><a href="conditions.html#cb349-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb349-6"><a href="conditions.html#cb349-6" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb349-7"><a href="conditions.html#cb349-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb349-8"><a href="conditions.html#cb349-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 1</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb349-9"><a href="conditions.html#cb349-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb349-10"><a href="conditions.html#cb349-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb349-11"><a href="conditions.html#cb349-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb349-12"><a href="conditions.html#cb349-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 1</span></span>
<span id="cb349-13"><a href="conditions.html#cb349-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 2</span></span>
<span id="cb349-14"><a href="conditions.html#cb349-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb349-15"><a href="conditions.html#cb349-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Muffles level 2 handler and the default handler</span></span>
<span id="cb349-16"><a href="conditions.html#cb349-16" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb349-17"><a href="conditions.html#cb349-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">cat</span>(<span class="st">&quot;Level 2</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb349-18"><a href="conditions.html#cb349-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb349-19"><a href="conditions.html#cb349-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb349-20"><a href="conditions.html#cb349-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;Level 1</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb349-21"><a href="conditions.html#cb349-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb349-22"><a href="conditions.html#cb349-22" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb349-23"><a href="conditions.html#cb349-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb349-24"><a href="conditions.html#cb349-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb349-25"><a href="conditions.html#cb349-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb349-26"><a href="conditions.html#cb349-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Level 1</span></span></code></pre></div>
</div>
<div id="call-stacks" class="section level3" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> Call stacks</h3>
<p>
</p>
<p>To complete the section, there are some important differences between the call stacks of exiting and calling handlers. These differences are generally not important but I’m including them here because I’ve occasionally found them useful, and don’t want to forget about them!</p>
<p>It’s easiest to see the difference by setting up a small example that uses <code>lobstr::cst()</code>:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="conditions.html#cb350-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">g</span>()</span>
<span id="cb350-2"><a href="conditions.html#cb350-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">h</span>()</span>
<span id="cb350-3"><a href="conditions.html#cb350-3" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">message</span>(<span class="st">&quot;!&quot;</span>)</span></code></pre></div>
<p>Calling handlers are called in the context of the call that signalled the condition:</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="conditions.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(<span class="fu">f</span>(), <span class="at">message =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb351-2"><a href="conditions.html#cb351-2" aria-hidden="true" tabindex="-1"></a>  lobstr<span class="sc">::</span><span class="fu">cst</span>()</span>
<span id="cb351-3"><a href="conditions.html#cb351-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb351-4"><a href="conditions.html#cb351-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb351-5"><a href="conditions.html#cb351-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      █</span></span>
<span id="cb351-6"><a href="conditions.html#cb351-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   1. ├─base::withCallingHandlers(...)</span></span>
<span id="cb351-7"><a href="conditions.html#cb351-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   2. ├─global::f()</span></span>
<span id="cb351-8"><a href="conditions.html#cb351-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   3. │ └─global::g()</span></span>
<span id="cb351-9"><a href="conditions.html#cb351-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   4. │   └─global::h()</span></span>
<span id="cb351-10"><a href="conditions.html#cb351-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   5. │     └─base::message(&quot;!&quot;)</span></span>
<span id="cb351-11"><a href="conditions.html#cb351-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   6. │       ├─base::withRestarts(...)</span></span>
<span id="cb351-12"><a href="conditions.html#cb351-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   7. │       │ └─base:::withOneRestart(expr, restarts[[1L]])</span></span>
<span id="cb351-13"><a href="conditions.html#cb351-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   8. │       │   └─base:::doWithOneRestart(return(expr), restart)</span></span>
<span id="cb351-14"><a href="conditions.html#cb351-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   9. │       └─base::signalCondition(cond)</span></span>
<span id="cb351-15"><a href="conditions.html#cb351-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  10. └─(function (cnd) ...</span></span>
<span id="cb351-16"><a href="conditions.html#cb351-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  11.   └─lobstr::cst()</span></span></code></pre></div>
<p>Whereas exiting handlers are called in the context of the call to <code>tryCatch()</code>:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="conditions.html#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(<span class="fu">f</span>(), <span class="at">message =</span> <span class="cf">function</span>(cnd) lobstr<span class="sc">::</span><span class="fu">cst</span>())</span>
<span id="cb352-2"><a href="conditions.html#cb352-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     █</span></span>
<span id="cb352-3"><a href="conditions.html#cb352-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1. └─base::tryCatch(f(), message = function(cnd) lobstr::cst())</span></span>
<span id="cb352-4"><a href="conditions.html#cb352-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2.   └─base:::tryCatchList(expr, classes, parentenv, handlers)</span></span>
<span id="cb352-5"><a href="conditions.html#cb352-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3.     └─base:::tryCatchOne(expr, names, parentenv, handlers[[1L]])</span></span>
<span id="cb352-6"><a href="conditions.html#cb352-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4.       └─value[[3L]](cond)</span></span>
<span id="cb352-7"><a href="conditions.html#cb352-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5.         └─lobstr::cst()</span></span></code></pre></div>
</div>
<div id="exercises-25" class="section level3" number="8.4.5">
<h3><span class="header-section-number">8.4.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What extra information does the condition generated by <code>abort()</code> contain
compared to the condition generated by <code>stop()</code> i.e. what’s the difference
between these two objects? Read the help for <code>?abort</code> to learn more.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="conditions.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">catch_cnd</span>(<span class="fu">stop</span>(<span class="st">&quot;An error&quot;</span>))</span>
<span id="cb353-2"><a href="conditions.html#cb353-2" aria-hidden="true" tabindex="-1"></a><span class="fu">catch_cnd</span>(<span class="fu">abort</span>(<span class="st">&quot;An error&quot;</span>))</span></code></pre></div></li>
<li><p>Predict the results of evaluating the following code</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="conditions.html#cb354-1" aria-hidden="true" tabindex="-1"></a>show_condition <span class="ot">&lt;-</span> <span class="cf">function</span>(code) {</span>
<span id="cb354-2"><a href="conditions.html#cb354-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb354-3"><a href="conditions.html#cb354-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;error&quot;</span>,</span>
<span id="cb354-4"><a href="conditions.html#cb354-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">warning =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;warning&quot;</span>,</span>
<span id="cb354-5"><a href="conditions.html#cb354-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;message&quot;</span>,</span>
<span id="cb354-6"><a href="conditions.html#cb354-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb354-7"><a href="conditions.html#cb354-7" aria-hidden="true" tabindex="-1"></a>      code</span>
<span id="cb354-8"><a href="conditions.html#cb354-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NULL</span></span>
<span id="cb354-9"><a href="conditions.html#cb354-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb354-10"><a href="conditions.html#cb354-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb354-11"><a href="conditions.html#cb354-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb354-12"><a href="conditions.html#cb354-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb354-13"><a href="conditions.html#cb354-13" aria-hidden="true" tabindex="-1"></a><span class="fu">show_condition</span>(<span class="fu">stop</span>(<span class="st">&quot;!&quot;</span>))</span>
<span id="cb354-14"><a href="conditions.html#cb354-14" aria-hidden="true" tabindex="-1"></a><span class="fu">show_condition</span>(<span class="dv">10</span>)</span>
<span id="cb354-15"><a href="conditions.html#cb354-15" aria-hidden="true" tabindex="-1"></a><span class="fu">show_condition</span>(<span class="fu">warning</span>(<span class="st">&quot;?!&quot;</span>))</span>
<span id="cb354-16"><a href="conditions.html#cb354-16" aria-hidden="true" tabindex="-1"></a><span class="fu">show_condition</span>({</span>
<span id="cb354-17"><a href="conditions.html#cb354-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10</span></span>
<span id="cb354-18"><a href="conditions.html#cb354-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;?&quot;</span>)</span>
<span id="cb354-19"><a href="conditions.html#cb354-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;?!&quot;</span>)</span>
<span id="cb354-20"><a href="conditions.html#cb354-20" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div></li>
<li><p>Explain the results of running this code:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="conditions.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="fu">withCallingHandlers</span>(</span>
<span id="cb355-2"><a href="conditions.html#cb355-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">message</span>(<span class="st">&quot;b&quot;</span>),</span>
<span id="cb355-3"><a href="conditions.html#cb355-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb355-4"><a href="conditions.html#cb355-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> <span class="cf">function</span>(cnd) <span class="fu">message</span>(<span class="st">&quot;a&quot;</span>),</span>
<span id="cb355-5"><a href="conditions.html#cb355-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;c&quot;</span>)</span>
<span id="cb355-6"><a href="conditions.html#cb355-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb355-7"><a href="conditions.html#cb355-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb355-8"><a href="conditions.html#cb355-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; b</span></span>
<span id="cb355-9"><a href="conditions.html#cb355-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; a</span></span>
<span id="cb355-10"><a href="conditions.html#cb355-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; b</span></span>
<span id="cb355-11"><a href="conditions.html#cb355-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; c</span></span></code></pre></div></li>
<li><p>Read the source code for <code>catch_cnd()</code> and explain how it works.</p></li>
<li><p>How could you rewrite <code>show_condition()</code> to use a single handler?</p></li>
</ol>
</div>
</div>
<div id="custom-conditions" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Custom conditions</h2>
<p>
</p>
<p>One of the challenges of error handling in R is that most functions generate one of the built-in conditions, which contain only a <code>message</code> and a <code>call</code>. That means that if you want to detect a specific type of error, you can only work with the text of the error message. This is error prone, not only because the message might change over time, but also because messages can be translated into other languages.</p>
<p>Fortunately R has a powerful, but little used feature: the ability to create custom conditions that can contain additional metadata. Creating custom conditions is a little fiddly in base R, but <code>rlang::abort()</code> makes it very easy as you can supply a custom <code>.subclass</code> and additional metadata.</p>
<p>The following example shows the basic pattern. I recommend using the following call structure for custom conditions. This takes advantage of R’s flexible argument matching so that the name of the type of error comes first, followed by the user-facing text, followed by custom metadata.</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="conditions.html#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">abort</span>(</span>
<span id="cb356-2"><a href="conditions.html#cb356-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;error_not_found&quot;</span>,</span>
<span id="cb356-3"><a href="conditions.html#cb356-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">message =</span> <span class="st">&quot;Path `blah.csv` not found&quot;</span>, </span>
<span id="cb356-4"><a href="conditions.html#cb356-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">&quot;blah.csv&quot;</span></span>
<span id="cb356-5"><a href="conditions.html#cb356-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb356-6"><a href="conditions.html#cb356-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Path `blah.csv` not found</span></span></code></pre></div>
<p>Custom conditions work just like regular conditions when used interactively, but allow handlers to do much more.</p>
<div id="motivation" class="section level3" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Motivation</h3>
<p>To explore these ideas in more depth, let’s take <code>base::log()</code>. It does the minimum when throwing errors caused by invalid arguments:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="conditions.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(letters)</span>
<span id="cb357-2"><a href="conditions.html#cb357-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in log(letters): non-numeric argument to mathematical function</span></span>
<span id="cb357-3"><a href="conditions.html#cb357-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">base =</span> letters)</span>
<span id="cb357-4"><a href="conditions.html#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in log(1:10, base = letters): non-numeric argument to mathematical function</span></span></code></pre></div>
<p>I think we can do better by being explicit about which argument is the problem (i.e. <code>x</code> or <code>base</code>), and saying what the problematic input is (not just what it isn’t).</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="conditions.html#cb358-1" aria-hidden="true" tabindex="-1"></a>my_log <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>)) {</span>
<span id="cb358-2"><a href="conditions.html#cb358-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) {</span>
<span id="cb358-3"><a href="conditions.html#cb358-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abort</span>(<span class="fu">paste0</span>(</span>
<span id="cb358-4"><a href="conditions.html#cb358-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;`x` must be a numeric vector; not &quot;</span>, <span class="fu">typeof</span>(x), <span class="st">&quot;.&quot;</span></span>
<span id="cb358-5"><a href="conditions.html#cb358-5" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb358-6"><a href="conditions.html#cb358-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb358-7"><a href="conditions.html#cb358-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(base)) {</span>
<span id="cb358-8"><a href="conditions.html#cb358-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abort</span>(<span class="fu">paste0</span>(</span>
<span id="cb358-9"><a href="conditions.html#cb358-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;`base` must be a numeric vector; not &quot;</span>, <span class="fu">typeof</span>(base), <span class="st">&quot;.&quot;</span></span>
<span id="cb358-10"><a href="conditions.html#cb358-10" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb358-11"><a href="conditions.html#cb358-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb358-12"><a href="conditions.html#cb358-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb358-13"><a href="conditions.html#cb358-13" aria-hidden="true" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">log</span>(x, <span class="at">base =</span> base)</span>
<span id="cb358-14"><a href="conditions.html#cb358-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This gives us:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="conditions.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_log</span>(letters)</span>
<span id="cb359-2"><a href="conditions.html#cb359-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: `x` must be a numeric vector; not character.</span></span>
<span id="cb359-3"><a href="conditions.html#cb359-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_log</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">base =</span> letters)</span>
<span id="cb359-4"><a href="conditions.html#cb359-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: `base` must be a numeric vector; not character.</span></span></code></pre></div>
<p>This is an improvement for interactive usage as the error messages are more likely to guide the user towards a correct fix. However, they’re no better if you want to programmatically handle the errors: all the useful metadata about the error is jammed into a single string.</p>
</div>
<div id="signalling" class="section level3" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Signalling</h3>
<p></p>
<p>Let’s build some infrastructure to improve this situation, We’ll start by providing a custom <code>abort()</code> function for bad arguments. This is a little over-generalised for the example at hand, but it reflects common patterns that I’ve seen across other functions. The pattern is fairly simple. We create a nice error message for the user, using <code>glue::glue()</code>, and store metadata in the condition call for the developer.</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="conditions.html#cb360-1" aria-hidden="true" tabindex="-1"></a>abort_bad_argument <span class="ot">&lt;-</span> <span class="cf">function</span>(arg, must, <span class="at">not =</span> <span class="cn">NULL</span>) {</span>
<span id="cb360-2"><a href="conditions.html#cb360-2" aria-hidden="true" tabindex="-1"></a>  msg <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;`{arg}` must {must}&quot;</span>)</span>
<span id="cb360-3"><a href="conditions.html#cb360-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(not)) {</span>
<span id="cb360-4"><a href="conditions.html#cb360-4" aria-hidden="true" tabindex="-1"></a>    not <span class="ot">&lt;-</span> <span class="fu">typeof</span>(not)</span>
<span id="cb360-5"><a href="conditions.html#cb360-5" aria-hidden="true" tabindex="-1"></a>    msg <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{msg}; not {not}.&quot;</span>)</span>
<span id="cb360-6"><a href="conditions.html#cb360-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb360-7"><a href="conditions.html#cb360-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb360-8"><a href="conditions.html#cb360-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abort</span>(<span class="st">&quot;error_bad_argument&quot;</span>, </span>
<span id="cb360-9"><a href="conditions.html#cb360-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> msg, </span>
<span id="cb360-10"><a href="conditions.html#cb360-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">arg =</span> arg, </span>
<span id="cb360-11"><a href="conditions.html#cb360-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">must =</span> must, </span>
<span id="cb360-12"><a href="conditions.html#cb360-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">not =</span> not</span>
<span id="cb360-13"><a href="conditions.html#cb360-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb360-14"><a href="conditions.html#cb360-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div style="page-break-after: always;"></div>
<div class="base">
<p>If you want to throw a custom error without adding a dependency on rlang, you can create a condition object “by hand” and then pass it to <code>stop()</code>:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="conditions.html#cb361-1" aria-hidden="true" tabindex="-1"></a>stop_custom <span class="ot">&lt;-</span> <span class="cf">function</span>(.subclass, message, <span class="at">call =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb361-2"><a href="conditions.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  err <span class="ot">&lt;-</span> <span class="fu">structure</span>(</span>
<span id="cb361-3"><a href="conditions.html#cb361-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb361-4"><a href="conditions.html#cb361-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">message =</span> message,</span>
<span id="cb361-5"><a href="conditions.html#cb361-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">call =</span> call,</span>
<span id="cb361-6"><a href="conditions.html#cb361-6" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb361-7"><a href="conditions.html#cb361-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb361-8"><a href="conditions.html#cb361-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">class =</span> <span class="fu">c</span>(.subclass, <span class="st">&quot;error&quot;</span>, <span class="st">&quot;condition&quot;</span>)</span>
<span id="cb361-9"><a href="conditions.html#cb361-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb361-10"><a href="conditions.html#cb361-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(err)</span>
<span id="cb361-11"><a href="conditions.html#cb361-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb361-12"><a href="conditions.html#cb361-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-13"><a href="conditions.html#cb361-13" aria-hidden="true" tabindex="-1"></a>err <span class="ot">&lt;-</span> <span class="fu">catch_cnd</span>(</span>
<span id="cb361-14"><a href="conditions.html#cb361-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop_custom</span>(<span class="st">&quot;error_new&quot;</span>, <span class="st">&quot;This is a custom error&quot;</span>, <span class="at">x =</span> <span class="dv">10</span>)</span>
<span id="cb361-15"><a href="conditions.html#cb361-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb361-16"><a href="conditions.html#cb361-16" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(err)</span>
<span id="cb361-17"><a href="conditions.html#cb361-17" aria-hidden="true" tabindex="-1"></a>err<span class="sc">$</span>x</span></code></pre></div>
</div>
<p>We can now rewrite <code>my_log()</code> to use this new helper:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="conditions.html#cb362-1" aria-hidden="true" tabindex="-1"></a>my_log <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>)) {</span>
<span id="cb362-2"><a href="conditions.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(x)) {</span>
<span id="cb362-3"><a href="conditions.html#cb362-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abort_bad_argument</span>(<span class="st">&quot;x&quot;</span>, <span class="at">must =</span> <span class="st">&quot;be numeric&quot;</span>, <span class="at">not =</span> x)</span>
<span id="cb362-4"><a href="conditions.html#cb362-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb362-5"><a href="conditions.html#cb362-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(base)) {</span>
<span id="cb362-6"><a href="conditions.html#cb362-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">abort_bad_argument</span>(<span class="st">&quot;base&quot;</span>, <span class="at">must =</span> <span class="st">&quot;be numeric&quot;</span>, <span class="at">not =</span> base)</span>
<span id="cb362-7"><a href="conditions.html#cb362-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb362-8"><a href="conditions.html#cb362-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb362-9"><a href="conditions.html#cb362-9" aria-hidden="true" tabindex="-1"></a>  base<span class="sc">::</span><span class="fu">log</span>(x, <span class="at">base =</span> base)</span>
<span id="cb362-10"><a href="conditions.html#cb362-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>my_log()</code> itself is not much shorter, but is a little more meangingful, and it ensures that error messages for bad arguments are consistent across functions. It yields the same interactive error messages as before:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="conditions.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_log</span>(letters)</span>
<span id="cb363-2"><a href="conditions.html#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: `x` must be numeric; not character.</span></span>
<span id="cb363-3"><a href="conditions.html#cb363-3" aria-hidden="true" tabindex="-1"></a><span class="fu">my_log</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">base =</span> letters)</span>
<span id="cb363-4"><a href="conditions.html#cb363-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: `base` must be numeric; not character.</span></span></code></pre></div>
</div>
<div id="handling" class="section level3" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Handling</h3>
<p></p>
<p>These structured condition objects are much easier to program with. The first place you might want to use this capability is when testing your function. Unit testing is not a subject of this book (see <a href="http://r-pkgs.had.co.nz/">R packages</a> for details), but the basics are easy to understand. The following code captures the error, and then asserts it has the structure that we expect.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="conditions.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb364-2"><a href="conditions.html#cb364-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-3"><a href="conditions.html#cb364-3" aria-hidden="true" tabindex="-1"></a>err <span class="ot">&lt;-</span> <span class="fu">catch_cnd</span>(<span class="fu">my_log</span>(<span class="st">&quot;a&quot;</span>))</span>
<span id="cb364-4"><a href="conditions.html#cb364-4" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_s3_class</span>(err, <span class="st">&quot;error_bad_argument&quot;</span>)</span>
<span id="cb364-5"><a href="conditions.html#cb364-5" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_equal</span>(err<span class="sc">$</span>arg, <span class="st">&quot;x&quot;</span>)</span>
<span id="cb364-6"><a href="conditions.html#cb364-6" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_equal</span>(err<span class="sc">$</span>not, <span class="st">&quot;character&quot;</span>)</span></code></pre></div>
<p>We can also use the class (<code>error_bad_argument</code>) in <code>tryCatch()</code> to only handle that specific error:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="conditions.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb365-2"><a href="conditions.html#cb365-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">error_bad_argument =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;bad_argument&quot;</span>,</span>
<span id="cb365-3"><a href="conditions.html#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;other error&quot;</span>,</span>
<span id="cb365-4"><a href="conditions.html#cb365-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">my_log</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb365-5"><a href="conditions.html#cb365-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb365-6"><a href="conditions.html#cb365-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;bad_argument&quot;</span></span></code></pre></div>
<p>When using <code>tryCatch()</code> with multiple handlers and custom classes, the first handler to match any class in the signal’s class vector is called, not the best match. For this reason, you need to make sure to put the most specific handlers first. The following code does not do what you might hope:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="conditions.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb366-2"><a href="conditions.html#cb366-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;other error&quot;</span>,</span>
<span id="cb366-3"><a href="conditions.html#cb366-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">error_bad_argument =</span> <span class="cf">function</span>(cnd) <span class="st">&quot;bad_argument&quot;</span>,</span>
<span id="cb366-4"><a href="conditions.html#cb366-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">my_log</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb366-5"><a href="conditions.html#cb366-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb366-6"><a href="conditions.html#cb366-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;other error&quot;</span></span></code></pre></div>
</div>
<div id="exercises-26" class="section level3" number="8.5.4">
<h3><span class="header-section-number">8.5.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Inside a package, it’s occasionally useful to check that a package is
installed before using it. Write a function that checks if a package is
installed (with <code>requireNamespace("pkg", quietly = FALSE))</code> and if not,
throws a custom condition that includes the package name in the metadata.</p></li>
<li><p>Inside a package you often need to stop with an error when something
is not right. Other packages that depend on your package might be
tempted to check these errors in their unit tests. How could you help
these packages to avoid relying on the error message which is part of
the user interface rather than the API and might change without notice?</p></li>
</ol>
</div>
</div>
<div id="condition-applications" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Applications</h2>
<p>Now that you’ve learned the basic tools of R’s condition system, it’s time to dive into some applications. The goal of this section is not to show every possible usage of <code>tryCatch()</code> and <code>withCallingHandlers()</code> but to illustrate some common patterns that frequently crop up. Hopefully these will get your creative juices flowing, so when you encounter a new problem you can come up with a useful solution.</p>
<div id="failure-value" class="section level3" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> Failure value</h3>
<p>There are a few simple, but useful, <code>tryCatch()</code> patterns based on returning a value from the error handler. The simplest case is a wrapper to return a default value if an error occurs:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="conditions.html#cb367-1" aria-hidden="true" tabindex="-1"></a>fail_with <span class="ot">&lt;-</span> <span class="cf">function</span>(expr, <span class="at">value =</span> <span class="cn">NULL</span>) {</span>
<span id="cb367-2"><a href="conditions.html#cb367-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb367-3"><a href="conditions.html#cb367-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) value,</span>
<span id="cb367-4"><a href="conditions.html#cb367-4" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb367-5"><a href="conditions.html#cb367-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb367-6"><a href="conditions.html#cb367-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb367-7"><a href="conditions.html#cb367-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb367-8"><a href="conditions.html#cb367-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fail_with</span>(<span class="fu">log</span>(<span class="dv">10</span>), <span class="cn">NA_real_</span>)</span>
<span id="cb367-9"><a href="conditions.html#cb367-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2.3</span></span>
<span id="cb367-10"><a href="conditions.html#cb367-10" aria-hidden="true" tabindex="-1"></a><span class="fu">fail_with</span>(<span class="fu">log</span>(<span class="st">&quot;x&quot;</span>), <span class="cn">NA_real_</span>)</span>
<span id="cb367-11"><a href="conditions.html#cb367-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>A more sophisticated application is <code>base::try()</code>. Below, <code>try2()</code> extracts the essence of <code>base::try()</code>; the real function is more complicated in order to make the error message look more like what you’d see if <code>tryCatch()</code> wasn’t used.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="conditions.html#cb368-1" aria-hidden="true" tabindex="-1"></a>try2 <span class="ot">&lt;-</span> <span class="cf">function</span>(expr, <span class="at">silent =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb368-2"><a href="conditions.html#cb368-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb368-3"><a href="conditions.html#cb368-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb368-4"><a href="conditions.html#cb368-4" aria-hidden="true" tabindex="-1"></a>      msg <span class="ot">&lt;-</span> <span class="fu">conditionMessage</span>(cnd)</span>
<span id="cb368-5"><a href="conditions.html#cb368-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="sc">!</span>silent) {</span>
<span id="cb368-6"><a href="conditions.html#cb368-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">message</span>(<span class="st">&quot;Error: &quot;</span>, msg)</span>
<span id="cb368-7"><a href="conditions.html#cb368-7" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb368-8"><a href="conditions.html#cb368-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">structure</span>(msg, <span class="at">class =</span> <span class="st">&quot;try-error&quot;</span>)</span>
<span id="cb368-9"><a href="conditions.html#cb368-9" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb368-10"><a href="conditions.html#cb368-10" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb368-11"><a href="conditions.html#cb368-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb368-12"><a href="conditions.html#cb368-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb368-13"><a href="conditions.html#cb368-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb368-14"><a href="conditions.html#cb368-14" aria-hidden="true" tabindex="-1"></a><span class="fu">try2</span>(<span class="dv">1</span>)</span>
<span id="cb368-15"><a href="conditions.html#cb368-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb368-16"><a href="conditions.html#cb368-16" aria-hidden="true" tabindex="-1"></a><span class="fu">try2</span>(<span class="fu">stop</span>(<span class="st">&quot;Hi&quot;</span>))</span>
<span id="cb368-17"><a href="conditions.html#cb368-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Hi</span></span>
<span id="cb368-18"><a href="conditions.html#cb368-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Hi&quot;</span></span>
<span id="cb368-19"><a href="conditions.html#cb368-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb368-20"><a href="conditions.html#cb368-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;try-error&quot;</span></span>
<span id="cb368-21"><a href="conditions.html#cb368-21" aria-hidden="true" tabindex="-1"></a><span class="fu">try2</span>(<span class="fu">stop</span>(<span class="st">&quot;Hi&quot;</span>), <span class="at">silent =</span> <span class="cn">TRUE</span>)</span>
<span id="cb368-22"><a href="conditions.html#cb368-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Hi&quot;</span></span>
<span id="cb368-23"><a href="conditions.html#cb368-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,&quot;class&quot;)</span></span>
<span id="cb368-24"><a href="conditions.html#cb368-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;try-error&quot;</span></span></code></pre></div>
</div>
<div id="try-success-failure" class="section level3" number="8.6.2">
<h3><span class="header-section-number">8.6.2</span> Success and failure values</h3>
<p>We can extend this pattern to return one value if the code evaluates successfully (<code>success_val</code>), and another if it fails (<code>error_val</code>). This pattern just requires one small trick: evaluating the user supplied code, then <code>success_val</code>. If the code throws an error, we’ll never get to <code>success_val</code> and will instead return <code>error_val</code>.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="conditions.html#cb369-1" aria-hidden="true" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb369-2"><a href="conditions.html#cb369-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb369-3"><a href="conditions.html#cb369-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) error_val,</span>
<span id="cb369-4"><a href="conditions.html#cb369-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb369-5"><a href="conditions.html#cb369-5" aria-hidden="true" tabindex="-1"></a>      expr</span>
<span id="cb369-6"><a href="conditions.html#cb369-6" aria-hidden="true" tabindex="-1"></a>      success_val</span>
<span id="cb369-7"><a href="conditions.html#cb369-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb369-8"><a href="conditions.html#cb369-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb369-9"><a href="conditions.html#cb369-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can use this to determine if an expression fails:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="conditions.html#cb370-1" aria-hidden="true" tabindex="-1"></a>does_error <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb370-2"><a href="conditions.html#cb370-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb370-3"><a href="conditions.html#cb370-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="cn">TRUE</span>,</span>
<span id="cb370-4"><a href="conditions.html#cb370-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb370-5"><a href="conditions.html#cb370-5" aria-hidden="true" tabindex="-1"></a>      expr</span>
<span id="cb370-6"><a href="conditions.html#cb370-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">FALSE</span></span>
<span id="cb370-7"><a href="conditions.html#cb370-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb370-8"><a href="conditions.html#cb370-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb370-9"><a href="conditions.html#cb370-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Or to capture any condition, like just <code>rlang::catch_cnd()</code>:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="conditions.html#cb371-1" aria-hidden="true" tabindex="-1"></a>catch_cnd <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb371-2"><a href="conditions.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb371-3"><a href="conditions.html#cb371-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">condition =</span> <span class="cf">function</span>(cnd) cnd, </span>
<span id="cb371-4"><a href="conditions.html#cb371-4" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb371-5"><a href="conditions.html#cb371-5" aria-hidden="true" tabindex="-1"></a>      expr</span>
<span id="cb371-6"><a href="conditions.html#cb371-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NULL</span></span>
<span id="cb371-7"><a href="conditions.html#cb371-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb371-8"><a href="conditions.html#cb371-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb371-9"><a href="conditions.html#cb371-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can also use this pattern to create a <code>try()</code> variant. One challenge with <code>try()</code> is that it’s slightly challenging to determine if the code succeeded or failed. Rather than returning an object with a special class, I think it’s slightly nicer to return a list with two components <code>result</code> and <code>error</code>.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="conditions.html#cb372-1" aria-hidden="true" tabindex="-1"></a>safety <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb372-2"><a href="conditions.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb372-3"><a href="conditions.html#cb372-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb372-4"><a href="conditions.html#cb372-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">result =</span> <span class="cn">NULL</span>, <span class="at">error =</span> cnd)</span>
<span id="cb372-5"><a href="conditions.html#cb372-5" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb372-6"><a href="conditions.html#cb372-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">result =</span> expr, <span class="at">error =</span> <span class="cn">NULL</span>)</span>
<span id="cb372-7"><a href="conditions.html#cb372-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb372-8"><a href="conditions.html#cb372-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb372-9"><a href="conditions.html#cb372-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-10"><a href="conditions.html#cb372-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">safety</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">10</span>))</span>
<span id="cb372-11"><a href="conditions.html#cb372-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb372-12"><a href="conditions.html#cb372-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ result: num 11</span></span>
<span id="cb372-13"><a href="conditions.html#cb372-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ error : NULL</span></span>
<span id="cb372-14"><a href="conditions.html#cb372-14" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">safety</span>(<span class="fu">stop</span>(<span class="st">&quot;Error!&quot;</span>)))</span>
<span id="cb372-15"><a href="conditions.html#cb372-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb372-16"><a href="conditions.html#cb372-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ result: NULL</span></span>
<span id="cb372-17"><a href="conditions.html#cb372-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ error :List of 2</span></span>
<span id="cb372-18"><a href="conditions.html#cb372-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ message: chr &quot;Error!&quot;</span></span>
<span id="cb372-19"><a href="conditions.html#cb372-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ call   : language doTryCatch(return(expr), name, parentenv, handler)</span></span>
<span id="cb372-20"><a href="conditions.html#cb372-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></span></code></pre></div>
<p>(This is closely related to <code>purrr::safely()</code>, a function operator, which we’ll come back to in Section <a href="function-operators.html#safely">11.2.1</a>.)</p>
</div>
<div id="resignal" class="section level3" number="8.6.3">
<h3><span class="header-section-number">8.6.3</span> Resignal</h3>
<p></p>
<p>As well as returning default values when a condition is signalled, handlers can be used to make more informative error messages. One simple application is to make a function that works like <code>options(warn = 2)</code> for a single block of code. The idea is simple: we handle warnings by throwing an error:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="conditions.html#cb373-1" aria-hidden="true" tabindex="-1"></a>warning2error <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb373-2"><a href="conditions.html#cb373-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb373-3"><a href="conditions.html#cb373-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">warning =</span> <span class="cf">function</span>(cnd) <span class="fu">abort</span>(<span class="fu">conditionMessage</span>(cnd)),</span>
<span id="cb373-4"><a href="conditions.html#cb373-4" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb373-5"><a href="conditions.html#cb373-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb373-6"><a href="conditions.html#cb373-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="conditions.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">warning2error</span>({</span>
<span id="cb374-2"><a href="conditions.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">^</span> <span class="dv">4</span></span>
<span id="cb374-3"><a href="conditions.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warn</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb374-4"><a href="conditions.html#cb374-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb374-5"><a href="conditions.html#cb374-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: Hello</span></span></code></pre></div>
<p>You could write a similar function if you were trying to find the source of an annoying message. More on this in Section <a href="debugging.html#non-error-failures">22.6</a>.</p>
<!-- 
Another common place where it's useful to add additional context dependent information. For example, you might have a function to download data from a remote website:


```r
download_data <- function(name) {
  src <- paste0("http://awesomedata.com/", name, ".csv")
  dst <- paste0("data/", name, ".csv")
  
  tryCatch(
    curl::curl_download(src, dst),
    error = function(cnd) {
      abort(
        glue::glue("Failed to download remote data `{name}`"), 
        parent = c
      )
    }
  )
}
```

There are two important ideas here:

* We rewrap `curl_download()`, which downloads the file, to provide context
  specific to our function.
  
* We include the original error as the `parent` so that the original context is
  still available.

-->
</div>
<div id="record" class="section level3" number="8.6.4">
<h3><span class="header-section-number">8.6.4</span> Record</h3>
<p>Another common pattern is to record conditions for later investigation. The new challenge here is that calling handlers are called only for their side-effects so we can’t return values, but instead need to modify some object in place.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="conditions.html#cb375-1" aria-hidden="true" tabindex="-1"></a>catch_cnds <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb375-2"><a href="conditions.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  conds <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb375-3"><a href="conditions.html#cb375-3" aria-hidden="true" tabindex="-1"></a>  add_cond <span class="ot">&lt;-</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb375-4"><a href="conditions.html#cb375-4" aria-hidden="true" tabindex="-1"></a>    conds <span class="ot">&lt;&lt;-</span> <span class="fu">append</span>(conds, <span class="fu">list</span>(cnd))</span>
<span id="cb375-5"><a href="conditions.html#cb375-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb375-6"><a href="conditions.html#cb375-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb375-7"><a href="conditions.html#cb375-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb375-8"><a href="conditions.html#cb375-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb375-9"><a href="conditions.html#cb375-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">message =</span> add_cond,</span>
<span id="cb375-10"><a href="conditions.html#cb375-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">warning =</span> add_cond,</span>
<span id="cb375-11"><a href="conditions.html#cb375-11" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb375-12"><a href="conditions.html#cb375-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb375-13"><a href="conditions.html#cb375-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb375-14"><a href="conditions.html#cb375-14" aria-hidden="true" tabindex="-1"></a>  conds</span>
<span id="cb375-15"><a href="conditions.html#cb375-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb375-16"><a href="conditions.html#cb375-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb375-17"><a href="conditions.html#cb375-17" aria-hidden="true" tabindex="-1"></a><span class="fu">catch_cnds</span>({</span>
<span id="cb375-18"><a href="conditions.html#cb375-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inform</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb375-19"><a href="conditions.html#cb375-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warn</span>(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb375-20"><a href="conditions.html#cb375-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inform</span>(<span class="st">&quot;c&quot;</span>)</span>
<span id="cb375-21"><a href="conditions.html#cb375-21" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb375-22"><a href="conditions.html#cb375-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb375-23"><a href="conditions.html#cb375-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;message: a</span></span>
<span id="cb375-24"><a href="conditions.html#cb375-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &gt;</span></span>
<span id="cb375-25"><a href="conditions.html#cb375-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb375-26"><a href="conditions.html#cb375-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb375-27"><a href="conditions.html#cb375-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;warning: b&gt;</span></span>
<span id="cb375-28"><a href="conditions.html#cb375-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb375-29"><a href="conditions.html#cb375-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb375-30"><a href="conditions.html#cb375-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;message: c</span></span>
<span id="cb375-31"><a href="conditions.html#cb375-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &gt;</span></span></code></pre></div>
<p>What if you also want to capture errors? You’ll need to wrap the <code>withCallingHandlers()</code> in a <code>tryCatch()</code>. If an error occurs, it will be the last condition.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="conditions.html#cb376-1" aria-hidden="true" tabindex="-1"></a>catch_cnds <span class="ot">&lt;-</span> <span class="cf">function</span>(expr) {</span>
<span id="cb376-2"><a href="conditions.html#cb376-2" aria-hidden="true" tabindex="-1"></a>  conds <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb376-3"><a href="conditions.html#cb376-3" aria-hidden="true" tabindex="-1"></a>  add_cond <span class="ot">&lt;-</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb376-4"><a href="conditions.html#cb376-4" aria-hidden="true" tabindex="-1"></a>    conds <span class="ot">&lt;&lt;-</span> <span class="fu">append</span>(conds, <span class="fu">list</span>(cnd))</span>
<span id="cb376-5"><a href="conditions.html#cb376-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb376-6"><a href="conditions.html#cb376-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb376-7"><a href="conditions.html#cb376-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb376-8"><a href="conditions.html#cb376-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb376-9"><a href="conditions.html#cb376-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb376-10"><a href="conditions.html#cb376-10" aria-hidden="true" tabindex="-1"></a>      conds <span class="ot">&lt;&lt;-</span> <span class="fu">append</span>(conds, <span class="fu">list</span>(cnd))</span>
<span id="cb376-11"><a href="conditions.html#cb376-11" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb376-12"><a href="conditions.html#cb376-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">withCallingHandlers</span>(</span>
<span id="cb376-13"><a href="conditions.html#cb376-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">message =</span> add_cond,</span>
<span id="cb376-14"><a href="conditions.html#cb376-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">warning =</span> add_cond,</span>
<span id="cb376-15"><a href="conditions.html#cb376-15" aria-hidden="true" tabindex="-1"></a>      expr</span>
<span id="cb376-16"><a href="conditions.html#cb376-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb376-17"><a href="conditions.html#cb376-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb376-18"><a href="conditions.html#cb376-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb376-19"><a href="conditions.html#cb376-19" aria-hidden="true" tabindex="-1"></a>  conds</span>
<span id="cb376-20"><a href="conditions.html#cb376-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb376-21"><a href="conditions.html#cb376-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-22"><a href="conditions.html#cb376-22" aria-hidden="true" tabindex="-1"></a><span class="fu">catch_cnds</span>({</span>
<span id="cb376-23"><a href="conditions.html#cb376-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inform</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb376-24"><a href="conditions.html#cb376-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warn</span>(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb376-25"><a href="conditions.html#cb376-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abort</span>(<span class="st">&quot;C&quot;</span>)</span>
<span id="cb376-26"><a href="conditions.html#cb376-26" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb376-27"><a href="conditions.html#cb376-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb376-28"><a href="conditions.html#cb376-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;message: a</span></span>
<span id="cb376-29"><a href="conditions.html#cb376-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &gt;</span></span>
<span id="cb376-30"><a href="conditions.html#cb376-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb376-31"><a href="conditions.html#cb376-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb376-32"><a href="conditions.html#cb376-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;warning: b&gt;</span></span>
<span id="cb376-33"><a href="conditions.html#cb376-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb376-34"><a href="conditions.html#cb376-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb376-35"><a href="conditions.html#cb376-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;error/rlang_error&gt;</span></span>
<span id="cb376-36"><a href="conditions.html#cb376-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C</span></span>
<span id="cb376-37"><a href="conditions.html#cb376-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Backtrace:</span></span>
<span id="cb376-38"><a href="conditions.html#cb376-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1. global::catch_cnds(...)</span></span>
<span id="cb376-39"><a href="conditions.html#cb376-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6. base::withCallingHandlers(...)</span></span></code></pre></div>
<p>This is the key idea underlying the evaluate package<span class="citation"><a href="#fn50" class="footnote-ref" id="fnref50"><sup>50</sup></a></span> which powers knitr: it captures every output into a special data structure so that it can be later replayed. As a whole, the evaluate package is quite a lot more complicated than the code here because it also needs to handle plots and text output.</p>
</div>
<div id="no-default-behaviour" class="section level3" number="8.6.5">
<h3><span class="header-section-number">8.6.5</span> No default behaviour</h3>
<p>A final useful pattern is to signal a condition that doesn’t inherit from <code>message</code>, <code>warning</code> or <code>error</code>. Because there is no default behaviour, this means the condition has no effect unless the user specifically requests it. For example, you could imagine a logging system based on conditions:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="conditions.html#cb377-1" aria-hidden="true" tabindex="-1"></a>log <span class="ot">&lt;-</span> <span class="cf">function</span>(message, <span class="at">level =</span> <span class="fu">c</span>(<span class="st">&quot;info&quot;</span>, <span class="st">&quot;error&quot;</span>, <span class="st">&quot;fatal&quot;</span>)) {</span>
<span id="cb377-2"><a href="conditions.html#cb377-2" aria-hidden="true" tabindex="-1"></a>  level <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(level)</span>
<span id="cb377-3"><a href="conditions.html#cb377-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">signal</span>(message, <span class="st">&quot;log&quot;</span>, <span class="at">level =</span> level)</span>
<span id="cb377-4"><a href="conditions.html#cb377-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>When you call <code>log()</code> a condition is signalled, but nothing happens because it has no default handler:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="conditions.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="st">&quot;This code was run&quot;</span>)</span></code></pre></div>
<p>To activate logging you need a handler that does something with the <code>log</code> condition. Below I define a <code>record_log()</code> function that will record all logging messages to a file:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="conditions.html#cb379-1" aria-hidden="true" tabindex="-1"></a>record_log <span class="ot">&lt;-</span> <span class="cf">function</span>(expr, <span class="at">path =</span> <span class="fu">stdout</span>()) {</span>
<span id="cb379-2"><a href="conditions.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb379-3"><a href="conditions.html#cb379-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">log =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb379-4"><a href="conditions.html#cb379-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(</span>
<span id="cb379-5"><a href="conditions.html#cb379-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;[&quot;</span>, cnd<span class="sc">$</span>level, <span class="st">&quot;] &quot;</span>, cnd<span class="sc">$</span>message, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb379-6"><a href="conditions.html#cb379-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">file =</span> path, <span class="at">append =</span> <span class="cn">TRUE</span></span>
<span id="cb379-7"><a href="conditions.html#cb379-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb379-8"><a href="conditions.html#cb379-8" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb379-9"><a href="conditions.html#cb379-9" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb379-10"><a href="conditions.html#cb379-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb379-11"><a href="conditions.html#cb379-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb379-12"><a href="conditions.html#cb379-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb379-13"><a href="conditions.html#cb379-13" aria-hidden="true" tabindex="-1"></a><span class="fu">record_log</span>(<span class="fu">log</span>(<span class="st">&quot;Hello&quot;</span>))</span>
<span id="cb379-14"><a href="conditions.html#cb379-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [info] Hello</span></span></code></pre></div>
<p>You could even imagine layering with another function that allows you to selectively suppress some logging levels.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="conditions.html#cb380-1" aria-hidden="true" tabindex="-1"></a>ignore_log_levels <span class="ot">&lt;-</span> <span class="cf">function</span>(expr, levels) {</span>
<span id="cb380-2"><a href="conditions.html#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(</span>
<span id="cb380-3"><a href="conditions.html#cb380-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">log =</span> <span class="cf">function</span>(cnd) {</span>
<span id="cb380-4"><a href="conditions.html#cb380-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (cnd<span class="sc">$</span>level <span class="sc">%in%</span> levels) {</span>
<span id="cb380-5"><a href="conditions.html#cb380-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cnd_muffle</span>(cnd)</span>
<span id="cb380-6"><a href="conditions.html#cb380-6" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb380-7"><a href="conditions.html#cb380-7" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb380-8"><a href="conditions.html#cb380-8" aria-hidden="true" tabindex="-1"></a>    expr</span>
<span id="cb380-9"><a href="conditions.html#cb380-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb380-10"><a href="conditions.html#cb380-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb380-11"><a href="conditions.html#cb380-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-12"><a href="conditions.html#cb380-12" aria-hidden="true" tabindex="-1"></a><span class="fu">record_log</span>(<span class="fu">ignore_log_levels</span>(<span class="fu">log</span>(<span class="st">&quot;Hello&quot;</span>), <span class="st">&quot;info&quot;</span>))</span></code></pre></div>
<div class="base">
<p>If you create a condition object by hand, and signal it with <code>signalCondition()</code>, <code>cnd_muffle()</code> will not work. Instead you need to call it with a muffle restart defined, like this:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="conditions.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">withRestarts</span>(<span class="fu">signalCondition</span>(cond), <span class="at">muffle =</span> <span class="cf">function</span>() <span class="cn">NULL</span>)</span></code></pre></div>
<p>Restarts are currently beyond the scope of the book, but I suspect will be included in the third edition.</p>
</div>
</div>
<div id="exercises-27" class="section level3" number="8.6.6">
<h3><span class="header-section-number">8.6.6</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Create <code>suppressConditions()</code> that works like <code>suppressMessages()</code> and
<code>suppressWarnings()</code> but suppresses everything. Think carefully about how you
should handle errors.</p></li>
<li><p>Compare the following two implementations of <code>message2error()</code>. What is the
main advantage of <code>withCallingHandlers()</code> in this scenario? (Hint: look
carefully at the traceback.)</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="conditions.html#cb382-1" aria-hidden="true" tabindex="-1"></a>message2error <span class="ot">&lt;-</span> <span class="cf">function</span>(code) {</span>
<span id="cb382-2"><a href="conditions.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">withCallingHandlers</span>(code, <span class="at">message =</span> <span class="cf">function</span>(e) <span class="fu">stop</span>(e))</span>
<span id="cb382-3"><a href="conditions.html#cb382-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb382-4"><a href="conditions.html#cb382-4" aria-hidden="true" tabindex="-1"></a>message2error <span class="ot">&lt;-</span> <span class="cf">function</span>(code) {</span>
<span id="cb382-5"><a href="conditions.html#cb382-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(code, <span class="at">message =</span> <span class="cf">function</span>(e) <span class="fu">stop</span>(e))</span>
<span id="cb382-6"><a href="conditions.html#cb382-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>How would you modify the <code>catch_cnds()</code> definition if you wanted to recreate
the original intermingling of warnings and messages?</p></li>
<li><p>Why is catching interrupts dangerous? Run this code to find out.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="conditions.html#cb383-1" aria-hidden="true" tabindex="-1"></a>bottles_of_beer <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">i =</span> <span class="dv">99</span>) {</span>
<span id="cb383-2"><a href="conditions.html#cb383-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(</span>
<span id="cb383-3"><a href="conditions.html#cb383-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;There are &quot;</span>, i, <span class="st">&quot; bottles of beer on the wall, &quot;</span>, </span>
<span id="cb383-4"><a href="conditions.html#cb383-4" aria-hidden="true" tabindex="-1"></a>    i, <span class="st">&quot; bottles of beer.&quot;</span></span>
<span id="cb383-5"><a href="conditions.html#cb383-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb383-6"><a href="conditions.html#cb383-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(i <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb383-7"><a href="conditions.html#cb383-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tryCatch</span>(</span>
<span id="cb383-8"><a href="conditions.html#cb383-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Sys.sleep</span>(<span class="dv">1</span>),</span>
<span id="cb383-9"><a href="conditions.html#cb383-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">interrupt =</span> <span class="cf">function</span>(err) {</span>
<span id="cb383-10"><a href="conditions.html#cb383-10" aria-hidden="true" tabindex="-1"></a>        i <span class="ot">&lt;&lt;-</span> i <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb383-11"><a href="conditions.html#cb383-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb383-12"><a href="conditions.html#cb383-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">message</span>(</span>
<span id="cb383-13"><a href="conditions.html#cb383-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Take one down, pass it around, &quot;</span>, i, </span>
<span id="cb383-14"><a href="conditions.html#cb383-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot; bottle&quot;</span>, <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="st">&quot;s&quot;</span>, <span class="st">&quot; of beer on the wall.&quot;</span></span>
<span id="cb383-15"><a href="conditions.html#cb383-15" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb383-16"><a href="conditions.html#cb383-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb383-17"><a href="conditions.html#cb383-17" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb383-18"><a href="conditions.html#cb383-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb383-19"><a href="conditions.html#cb383-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb383-20"><a href="conditions.html#cb383-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(</span>
<span id="cb383-21"><a href="conditions.html#cb383-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;No more bottles of beer on the wall, &quot;</span>, </span>
<span id="cb383-22"><a href="conditions.html#cb383-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;no more bottles of beer.&quot;</span></span>
<span id="cb383-23"><a href="conditions.html#cb383-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb383-24"><a href="conditions.html#cb383-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ol>
</div>
</div>
<div id="conditions-answers" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> Quiz answers</h2>
<ol style="list-style-type: decimal">
<li><p><code>error</code>, <code>warning</code>, and <code>message</code>.</p></li>
<li><p>You could use <code>try()</code> or <code>tryCatch()</code>.</p></li>
<li><p><code>tryCatch()</code> creates exiting handlers which will terminate the execution
of wrapped code; <code>withCallingHandlers()</code> creates calling handlers which
don’t affect the execution of wrapped code.</p></li>
<li><p>Because you can then capture specific types of error with <code>tryCatch()</code>,
rather than relying on the comparison of error strings, which is risky,
especially when messages are translated.</p></li>
</ol>

</div>
</div>



<div class="footnotes">
<hr />
<ol start="46">
<li id="fn46"><p>The trailing <code>.</code> in <code>call.</code> is a peculiarity of <code>stop()</code>; don’t read anything into it.<a href="conditions.html#fnref46" class="footnote-back">↩︎</a></p></li>
<li id="fn47"><p>But note that <code>cat()</code> requires an explicit trailing <code>"\n"</code> to print a new line.<a href="conditions.html#fnref47" class="footnote-back">↩︎</a></p></li>
<li id="fn48"><p>You can suppress the message with <code>try(..., silent = TRUE)</code>.<a href="conditions.html#fnref48" class="footnote-back">↩︎</a></p></li>
<li id="fn49"><p>You can tell if the expression failed because the result will have class <code>try-error</code>.<a href="conditions.html#fnref49" class="footnote-back">↩︎</a></p></li>
<li id="fn50"><p>Hadley Wickham and Yihui Xie, <em>Evaluate: Parsing and Evaluation Tools That Provide More Details Than the Default</em>, 2018, <a href="https://github.com/r-lib/evaluate" role="doc-biblioref">https://github.com/r-lib/evaluate</a>.<a href="conditions.html#fnref50" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="environments.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="fp.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/adv-r/edit/master/Conditions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
